<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="stay hungry,stay foolish"><meta name=author content=Kaliarch><link href=https://redhatxl.github.io/cloud-native/operator/tools/velero/Velero%20%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/ rel=canonical><link rel=icon href=../../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.16"><title>Velero 二次开发 - Kaliarch Blog</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.bcfcd587.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-G9D2HRH134"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-G9D2HRH134",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-G9D2HRH134",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#velero class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../../../.. title="Kaliarch Blog" class="md-header__button md-logo" aria-label="Kaliarch Blog" data-md-component=logo> <img src=../../../../../assets/images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Kaliarch Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Velero 二次开发 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/redhatxl/redhatxl.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> redhatxl.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../../develop/01-k8s%20%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D/ class=md-tabs__link> 云原生 </a> </li> <li class=md-tabs__item> <a href=../../../../../devops/Gitlab%20CI/01%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8B%E5%AE%9E%E6%88%98Gitlab%20CI/ class=md-tabs__link> devops </a> </li> <li class=md-tabs__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-tabs__link> 开发技术 </a> </li> <li class=md-tabs__item> <a href=../../../../../linux/system/Linux%20grub%3Agrub2%E8%AF%A6%E8%A7%A3/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../../../other/ class=md-tabs__link> 其他 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title="Kaliarch Blog" class="md-nav__button md-logo" aria-label="Kaliarch Blog" data-md-component=logo> <img src=../../../../../assets/images/logo.png alt=logo> </a> Kaliarch Blog </label> <div class=md-nav__source> <a href=https://github.com/redhatxl/redhatxl.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> redhatxl.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> <span class=md-ellipsis> 首页 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 云原生 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 云原生 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> 开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../develop/01-k8s%20%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 1.K8s 开发概念简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/02-K8s%20API%20%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.K8s API访问方式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/03-Client-go%20%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Client-go 的使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/04-Cobra%20%2B%20Client-go%E5%AE%9E%E7%8E%B0K8s%E7%AE%80%E5%8D%95%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 4.Cobra+Client-go实现K8s插件开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/05-client-go%E4%B9%8BListWatcher%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 5.Client-go源码分析之ListerWatcher </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/06-client-go%E4%B9%8BReflector%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 6.Client-go源码分析之Reflector </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/07-client-go%E4%B9%8BDeltaFIFO%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 7.Client-go源码分析之DeltaFIFO </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/08-client-go%E4%B9%8BInformer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 8.Client-go源码分析之Informer </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/09-client-go%E4%B9%8BSharedInformer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 9.Client-go源码分析之SharedInformer </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/10-client-go%E4%B9%8BIndexer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 10.Client-go源码分析之Indexer </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/11-client-go%E4%B9%8BWorkqueue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 11.Client-go源码分析之WorkQueue </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/12-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0Controller/ class=md-nav__link> <span class=md-ellipsis> 12.自定义实现Controller </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/13-%E8%AE%A4%E8%AF%86CRD/ class=md-nav__link> <span class=md-ellipsis> 13.认识CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/x-Informer%E5%AE%9E%E6%88%98%E4%B9%8B%E6%8C%81%E4%B9%85%E5%8C%96K8s%E4%BA%8B%E4%BB%B6%E8%87%B3ElasticSearch/ class=md-nav__link> <span class=md-ellipsis> x-Informer实战之持久化K8s事件至ElasticSearch </span> </a> </li> <li class=md-nav__item> <a href=../../../../develop/x-DeltaFIFO%E5%92%8Cindexer%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AF%B9%E6%AF%94/ class=md-nav__link> <span class=md-ellipsis> x-DeltaFIFO 与 Indexer关系 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 运维 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 运维 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> <span class=md-ellipsis> 工具 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> 工具 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../K8s%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7%E4%B9%8BKUR8/ class=md-nav__link> <span class=md-ellipsis> K8s可视化工具之KUR8 </span> </a> </li> <li class=md-nav__item> <a href=../../K8s%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C%E5%B7%A5%E5%85%B7%E4%B9%8BK9s/ class=md-nav__link> <span class=md-ellipsis> K8s快捷操作工具之K9s </span> </a> </li> <li class=md-nav__item> <a href=../../K8s%E8%89%B2%E5%BD%A9%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E4%B9%8Bkubecolor/ class=md-nav__link> <span class=md-ellipsis> K8s色彩输出工具之kubecolor </span> </a> </li> <li class=md-nav__item> <a href=../../K8s%E6%97%A5%E5%BF%97%E6%9F%A5%E7%9C%8B%E7%A5%9E%E5%99%A8%E4%B9%8Bkubetail/ class=md-nav__link> <span class=md-ellipsis> K8s日志查看利器之kubetail </span> </a> </li> <li class=md-nav__item> <a href=../../K8s%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E4%B9%8Bsniff/ class=md-nav__link> <span class=md-ellipsis> K8s 网络抓包之sniff </span> </a> </li> <li class=md-nav__item> <a href=../../Kubernetes%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> Kubernetes 六款备份还原工具 </span> </a> </li> <li class=md-nav__item> <a href=../../k8s%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E4%B9%8Bkrew/ class=md-nav__link> <span class=md-ellipsis> k8s 插件管理工具之krew </span> </a> </li> <li class=md-nav__item> <a href=../../%E6%9E%B6%E6%9E%84%E5%9B%BE%E7%A5%9E%E5%99%A8DaC%E4%B9%8BDiagram/ class=md-nav__link> <span class=md-ellipsis> 架构图神器DaC之Diagram </span> </a> </li> <li class=md-nav__item> <a href=../../%E4%BA%91%E5%8E%9F%E7%94%9F%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E4%B9%8Bvelero%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 云原生备份恢复之velero实战 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> <span class=md-ellipsis> 部署 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> 部署 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deploy/Ceph%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> Ceph机器安装部署 </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E4%B9%8Bminikube/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BK3s/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之K3s </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BKind/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之Kind </span> </a> </li> <li class=md-nav__item> <a href=../../../deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BMicroK8s/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之MicroK8s </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> <span class=md-ellipsis> servicemesh </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> servicemesh </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3_1> <label class=md-nav__link for=__nav_2_2_3_1 id=__nav_2_2_3_1_label tabindex=0> <span class=md-ellipsis> istio </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3_1> <span class="md-nav__icon md-icon"></span> istio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Envoy%E7%AC%94%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> Envoy笔记 </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/服务网格进阶实战.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/详解.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E4%B9%8BXDS%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> Istio之XDS协议解析 </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E7%AC%94%E8%AE%B0%E4%B9%8BGateway/ class=md-nav__link> <span class=md-ellipsis> Istio笔记之Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E7%AC%94%E8%AE%B0%E4%B9%8Bpilot/ class=md-nav__link> <span class=md-ellipsis> Istio笔记之pilot </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> Istio灰度发布 </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio之流量管理.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E7%AE%80%E4%BB%8B%E5%8F%8A%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> Istio简介及架构 </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E7%AC%94%E8%AE%B0%28%E4%B8%80%29/ class=md-nav__link> <span class=md-ellipsis> Istio微服务治理笔记(一) </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/Istio%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%9C%8D%E5%8A%A1%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> Istio基础之服务网络 </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/微服务金丝雀发布.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../servicemesh/istio/istio%E7%AC%94%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> istio笔记 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <label class=md-nav__link for=__nav_2_2_4 id=__nav_2_2_4_label tabindex=0> <span class=md-ellipsis> 排错 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> 排错 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../other/k8s%20%E9%9B%86%E7%BE%A4etcd%E6%8E%92%E9%94%99/ class=md-nav__link> <span class=md-ellipsis> k8s 集群etcd排错 </span> </a> </li> <li class=md-nav__item> <a href=../../../other/CronHPA/ class=md-nav__link> <span class=md-ellipsis> CronHPA初探 </span> </a> </li> <li class=md-nav__item> <a href=../../../other/%E8%AE%B0%E4%B8%80%E6%AC%A1K8smaster%20%E8%8A%82%E7%82%B9%E4%B8%80%E6%AC%A1%E6%8E%92%E9%94%99%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 记一次K8smaster 节点一次排错实战 </span> </a> </li> <li class=md-nav__item> <a href=../../../other/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%BA%BF%E4%B8%8Ak8s%E8%8A%82%E7%82%B9%E7%BB%B4%E6%8A%A4/ class=md-nav__link> <span class=md-ellipsis> 记一次线上k8s节点维护 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5> <label class=md-nav__link for=__nav_2_2_5 id=__nav_2_2_5_label tabindex=0> <span class=md-ellipsis> 容器 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_5> <span class="md-nav__icon md-icon"></span> 容器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/Dockerfile%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Dockerfile 最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/Docker%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> Docker底层原理 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/podman%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Podman详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/%E5%88%A9%E7%94%A8katacoda%20%E5%AE%9E%E7%8E%B0%E6%8B%89%E5%8F%96%E5%9B%BD%E5%A4%96%E9%95%9C%E5%83%8F/ class=md-nav__link> <span class=md-ellipsis> 利用katacoda实现拉取国外镜像 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/%E9%95%9C%E5%83%8F%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 镜像底层原理 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%B9%E5%99%A8/Harbor%E5%92%8Cregistry%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/ class=md-nav__link> <span class=md-ellipsis> Harbor/registry镜像仓库部署 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 安全 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 安全 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BKube-bench/ class=md-nav__link> <span class=md-ellipsis> K8s 安全之Kube-bench </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubeeye%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> KubeEye源码分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BKubeeye/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之KubeEye </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BNPD/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之NPD </span> </a> </li> <li class=md-nav__item> <a href="../../../../安全/Kubernetes安全之Open/ Policy/ Agent.md" class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8Bopenebs/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之openebs </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BPolaris/ class=md-nav__link> <span class=md-ellipsis> kubernetes安全之Polaris </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8Bkubescape/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全扫描之kubescape </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8%E4%B9%8BTrivy/ class=md-nav__link> <span class=md-ellipsis> 镜像安全扫描之Trivy </span> </a> </li> <li class=md-nav__item> <a href=../../../../%E5%AE%89%E5%85%A8/%E5%BC%80%E6%BA%90%E5%AE%B9%E5%99%A8%E5%AE%89%E5%85%A8%E5%B9%B3%E5%8F%B0%E4%B9%8BNeuVector/ class=md-nav__link> <span class=md-ellipsis> 开源容器安全平台之NeuVector </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../other/inside-kubernetes%20controller/ class=md-nav__link> <span class=md-ellipsis> Inside Kubernetes controller </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/Kubectl插件开发及开业分享.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/KubeEdge/ class=md-nav__link> <span class=md-ellipsis> KubeEdge初探 </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/Kubernetes%E5%BC%80%E5%8F%91%E6%8E%92%E9%94%99%E6%9D%82%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> Kubernetes开发排错杂记 </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/Kubernetes%E7%94%9F%E6%88%90kubeconfig/ class=md-nav__link> <span class=md-ellipsis> Kubernetes生成kubeconfig </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/%E5%8D%8E%E4%B8%BA%E4%BA%91%E5%8E%9F%E7%94%9FCCE%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 华为云原生CCE实战 </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3-Kong/ class=md-nav__link> <span class=md-ellipsis> 微服务API网关-Kong </span> </a> </li> <li class=md-nav__item> <a href=../../../../other/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E4%B8%AD10%E7%A7%8D%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 微服务架构中10种常用设计模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> devops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> devops </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> GitLab CI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> GitLab CI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/01%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8B%E5%AE%9E%E6%88%98Gitlab%20CI/ class=md-nav__link> <span class=md-ellipsis> 1.敏捷无敌之Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/02%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8BGitlab%20CI%E6%9E%B6%E6%9E%84%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> 2.敏捷无敌之Gitlab CI架构流程详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/03%E5%AE%9E%E6%88%98Gitlab%20CI%20%2B%20Supervisor%20%E5%8F%91%E5%B8%83Python%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 3.实战Gitlab CI + Supervisor 发布Python项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/04%E5%AE%9E%E6%88%98%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%8F%8A%E6%B7%B7%E5%90%88%E7%8E%AF%E5%A2%83Gitlab%20CI/ class=md-nav__link> <span class=md-ellipsis> 4.实战前后端项目及混合环境Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/05%E5%AE%9E%E6%88%98Gitlab%20CI%20%2B%20Kubernetes%20%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> 5.实战Kubernetes Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/Gitlab%20CI%E4%B9%8B%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/ class=md-nav__link> <span class=md-ellipsis> Gitlab CI之单元测试和代码扫描 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/Gitlab%20CI/Gitlab%20CI%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%85%B1%E4%BA%ABCI%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> Gitlab CI进阶之共享CI库 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> IaC </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> IaC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../devops/IaC/Terraform/IaC%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7%E4%B9%8BTerrascan/ class=md-nav__link> <span class=md-ellipsis> IaC扫描工具之Terrascan </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/IaC/Terraform/IaC%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%B9%8BTerratest/ class=md-nav__link> <span class=md-ellipsis> IaC测试工具之Terratest </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/IaC/Terraform/terraform-book/ class=md-nav__link> <span class=md-ellipsis> Terraform book </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/IaC/Terraform/Terraform%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> Terraform 相关概念及函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/IaC/Terraform/terraform%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Terraform 最佳实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../devops/other/Argo%20CD/ class=md-nav__link> <span class=md-ellipsis> Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/other/IaC%E4%B9%8BTerraform%20%E4%B8%8EPulumi%E4%BD%BF%E7%94%A8%E5%AF%B9%E6%AF%94/ class=md-nav__link> <span class=md-ellipsis> IaC之Terraform 与Pulumi使用对比 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../devops/other/Packer/ class=md-nav__link> <span class=md-ellipsis> 镜像定义工具Packer实战 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> 开发技术 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 开发技术 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> 设计模式 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> 设计模式 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_1> <label class=md-nav__link for=__nav_4_1_1 id=__nav_4_1_1_label tabindex=0> <span class=md-ellipsis> 创建型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> 创建型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.简单工厂模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.工厂方法模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 3.抽象工厂模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.建造者(生成器)模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/05-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 5.单例模式 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_2> <label class=md-nav__link for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class=md-ellipsis> 结构型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> 结构型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.装饰器模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.代理模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 3.桥接模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.适配器模式 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3 id=__nav_4_1_3_label tabindex=0> <span class=md-ellipsis> 行为型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> 行为型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.策略模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.观察者模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E7%89%88%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.模版模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.职责链模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Golang </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_1> <label class=md-nav__link for=__nav_4_2_1 id=__nav_4_2_1_label tabindex=0> <span class=md-ellipsis> Gin </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Gin </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/Golang/gin/gin%20%E6%A1%86%E6%9E%B6%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD/ class=md-nav__link> <span class=md-ellipsis> Gin框架热加载 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/Golang/gin/gin-swagger/ class=md-nav__link> <span class=md-ellipsis> Gin + Swagger快速生成API文档 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/Golang/gin/gin-validator%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/ class=md-nav__link> <span class=md-ellipsis> gin-validator参数校验 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/Golang/gin/gin%E6%A1%86%E6%9E%B6%E4%BC%98%E9%9B%85%E5%85%B3%E6%9C%BA%E9%87%8D%E5%90%AF/ class=md-nav__link> <span class=md-ellipsis> Gin框架优雅关机和重启 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2 id=__nav_4_2_2_label tabindex=0> <span class=md-ellipsis> 开发规范 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> 开发规范 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%80%A7%E8%83%BD01/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之性能01 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8301/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范01 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8302/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范02 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8303/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范03 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8304/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范04 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9901/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则01 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%BC%8F01/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之编程模式01 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9902/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则02 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9903/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则03 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9904/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则04 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9905/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则05 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3 id=__nav_4_2_3_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../develop/Golang/golang%20%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E6%9C%80%E7%BB%88%E4%B9%8Bjaeger/ class=md-nav__link> <span class=md-ellipsis> Golang 分布式链路追踪之jaeger </span> </a> </li> <li class=md-nav__item> <a href=../../../../../develop/Golang/golang%20%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/ class=md-nav__link> <span class=md-ellipsis> Go 内存对齐 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> 系统相关 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> 系统相关 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../linux/system/Linux%20grub%3Agrub2%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Linux grub/grub2详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/system/Linux%20%E5%86%85%E6%A0%B8%E5%BC%95%E5%AF%BC%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Linux 内核引导详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/system/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Linux 系统安全加固最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/system/virtio%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Virtio 详解 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Shell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../linux/shell/Shell%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Shell 教程概述 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/1.%E7%AC%AC%E4%B8%80%E4%B8%AAshell%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 1.第一个 Shell 程序 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/2.Shell%E5%8F%98%E9%87%8F/ class=md-nav__link> <span class=md-ellipsis> 2.Shell 变量 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/3.Shell%E5%8F%82%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 3.Shell 参数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/4.Shell%E6%95%B0%E7%BB%84/ class=md-nav__link> <span class=md-ellipsis> 4.Shell数组 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/5.Shell%E8%BF%90%E7%AE%97%E7%AC%A6/ class=md-nav__link> <span class=md-ellipsis> 5.Shell 运算符 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/6.Shell%20echo%3Aprintf%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 6.Shell echo/printf 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/7.Shell%20test%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 7.Shell test 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/8.Shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Shell 流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/9.Shell%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 8.Shell 函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/10.Shell%E8%BE%93%E5%85%A5%3A%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 10.Shell输入/输出重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/11.Shell%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 11.Shell 正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/12.Shell%20%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep/ class=md-nav__link> <span class=md-ellipsis> 12.Shell 三剑客之grep </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/13.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed/ class=md-nav__link> <span class=md-ellipsis> 13.Shell三剑客之sed </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/14.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk/ class=md-nav__link> <span class=md-ellipsis> 14.Shell三剑客之awk </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/15.Shell%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 15.Shell常用工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../linux/shell/16.Shell%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 16.Shell实战项目 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../other/ class=md-nav__link> <span class=md-ellipsis> 工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../../../other/ class=md-nav__link> <span class=md-ellipsis> 杂记 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 一 准备工作 </span> </a> <nav class=md-nav aria-label="一 准备工作"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11 class=md-nav__link> <span class=md-ellipsis> 1.1 开始之前 </span> </a> </li> <li class=md-nav__item> <a href=#12 class=md-nav__link> <span class=md-ellipsis> 1.2 创建设计文档 </span> </a> </li> <li class=md-nav__item> <a href=#13 class=md-nav__link> <span class=md-ellipsis> 1.3 寻找路径 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 二 开始开发 </span> </a> <nav class=md-nav aria-label="二 开始开发"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> <span class=md-ellipsis> 2.1 更新生成文件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#22-linting class=md-nav__link> <span class=md-ellipsis> 2.2 Linting </span> </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> <span class=md-ellipsis> 2.3 单元测试 </span> </a> </li> <li class=md-nav__item> <a href=#24-vendor class=md-nav__link> <span class=md-ellipsis> 2.4 vendor 依赖 </span> </a> </li> <li class=md-nav__item> <a href=#25 class=md-nav__link> <span class=md-ellipsis> 2.5 使用主分支 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=velero>Velero 二次开发<a class=headerlink href=#velero title="Permanent link">&para;</a></h1> <h2 id=_1>一 准备工作<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <h3 id=11>1.1 开始之前<a class=headerlink href=#11 title="Permanent link">&para;</a></h3> <ul> <li>熟悉行为准则<a href=https://github.com/vmware-tanzu/velero/blob/v1.7.0/CODE_OF_CONDUCT.md>Code of Conduct</a>。 </li> <li>参阅 <a href=https://github.com/vmware-tanzu/velero/blob/v1.7.0/CONTRIBUTING.md>CONTRIBUTING.md</a>以获取开发准则。</li> </ul> <h3 id=12>1.2 创建设计文档<a class=headerlink href=#12 title="Permanent link">&para;</a></h3> <p>拥有一个高层次的设计文档，其中包含建议的变更和影响，可以帮助维护人员评估是否应该合并一个主要变更。要发出设计拉请求，可以将 design/_ template.md 文件中的模板复制到新的 Markdown 文件中。</p> <h3 id=13>1.3 寻找路径<a class=headerlink href=#13 title="Permanent link">&para;</a></h3> <p>你可以加入 Velero 社区，以不同的方式做出贡献，包括帮助我们设计或测试新功能。对于任何我们考虑添加的重要特性，我们从设计文档开始。你可以在这里找到一个正在进行中的新设计的列表: <a href="https://github.com/vmware-tanzu/velero/pulls?q=is%3aopen+is%3apr+label%3adesign">https://github.com/vmware-tanzu/velero/pulls?q=is%3aopen+is%3apr+label%3adesign</a>。请随时回顾并帮助我们完成您的输入。您还可以使用: + 1: 和<img alt=👎 class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f44e.svg title=:-1:> 对问题进行投票，正如我们的功能增强请求和 Bug 问题模板中所解释的那样。这将帮助我们量化问题的重要性并对其进行优先排序。关于如何与我们的维护者和社区联系的信息，参加我们的在线会议，或者找到好的第一个问题，可以从我们的 Velero 社区页面开始。请浏览我们的资源列表，包括过去的在线社区会议、博客文章和其他资源的播放列表，以帮助您熟悉我们的项目: Velero 资源。</p> <h2 id=_2>二 开始开发<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <h3 id=21>2.1 更新生成文件<a class=headerlink href=#21 title="Permanent link">&para;</a></h3> <p>会pull一个velero/build-image 的镜像</p> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022135127.png></p> <p>如果您做了以下更改，请运行 make update 以重新生成文件:</p> <ul> <li>Add/edit/remove command line flags and/or their help text</li> <li>Add/edit/remove commands or subcommands</li> <li>Add new API types</li> <li>Add/edit/remove plugin protobuf message or service definitions</li> </ul> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022130941.png></p> <p>下面的文件是从源代码自动生成的:</p> <ul> <li>The clientset</li> <li>Listers</li> <li>Shared informers</li> <li>Documentation</li> <li>Protobuf/gRPC types</li> </ul> <p>您可以运行 make verify 以确保所有生成的文件（clientset、listers、shared informers、docs）都是最新的。</p> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022135610.png></p> <h2 id=22-linting>2.2 Linting<a class=headerlink href=#22-linting title="Permanent link">&para;</a></h2> <p>您可以运行 make lint 来执行构建映像中的 golangci-lint，或者执行构建映像外部的 local-lint。两者都使 lint 和使局部-lint 将只运行临时对变化。</p> <p>使用 lint-all 对整个代码库运行 linter。 默认的 linter 是通过 LINTERS 变量在 Makefile 中定义的。 您还可以通过运行命令来覆盖默认的 linter 列表 </p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>$<span class=w> </span>make<span class=w> </span>lint<span class=w> </span><span class=nv>LINTERS</span><span class=o>=</span>gosec
</code></pre></div> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022140830.png></p> <h2 id=23>2.3 单元测试<a class=headerlink href=#23 title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>make<span class=w> </span><span class=nb>test</span>
</code></pre></div> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022142653.png></p> <h2 id=24-vendor>2.4 vendor 依赖<a class=headerlink href=#24-vendor title="Permanent link">&para;</a></h2> <p>如果您需要添加或更新供应商依赖项，请参阅供应商：<a href=https://velero.io/docs/v1.7/vendoring-dependencies/ >Vendoring dependencies</a>.</p> <h2 id=25>2.5 使用主分支<a class=headerlink href=#25 title="Permanent link">&para;</a></h2> <p>如果您正在开发或使用主分支，请注意您可能需要更新 Velero CRD 以在其他开发工作完成时获得新的更改。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>$<span class=w> </span>velero<span class=w> </span>install<span class=w> </span>--crds-only<span class=w> </span>--dry-run<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>-
</code></pre></div> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20211022145350.png></p> <p>注意: 如果 Velero CLI 无法发现 Kubernetes 首选的 CRD API 版本，则可以更改默认的 CRD API 版本(v1beta1或 v1)。Kubernetes 版本 &lt; 1.16的首选 CRD API 版本是 v1beta1; </p> <p>Kubernetes 版本 &gt; = 1.16的首选 CRD API 版本是 v1。</p> <h1 id=tilt-velero>三 使用 Tilt 进行快速迭代 Velero 开发<a class=headerlink href=#tilt-velero title="Permanent link">&para;</a></h1> <h2 id=31>3.1 概要<a class=headerlink href=#31 title="Permanent link">&para;</a></h2> <p>本文档描述了如何将 <a href=https://tilt.dev/ >Tilt</a> 与任何集群一起使用，以实现简化的工作流，从而提供简单的部署和快速的迭代构建。这种设置允许继续部署 Velero 服务器，如果指定，则允许任何提供程序插件或 restic daemonset。它通过以下方式完成这项工作:</p> <ul> <li>部署必要的 Kubernetes 资源，例如 Velero CRD 和 Velero 部署</li> <li>为 Velero 和（如果指定）提供程序插件构建本地二进制文件作为 local_resource</li> <li>调用 docker_build 将任何二进制文件实时更新到容器/初始化容器中并触发重新启动</li> </ul> <p>Tilt 会在 velero/tilt-resources 下寻找配置文件。此目录中的大多数文件都被 gitignored 忽略，因此您可以根据需要配置您的设置。</p> <h2 id=32>3.2 先决条件<a class=headerlink href=#32 title="Permanent link">&para;</a></h2> <ol> <li>Docker v19.03或更新的 </li> <li>Kubernetes cluster v1.10或更高版本(不一定是 Kind) </li> <li>Tilt v0.12.0或更新版本 </li> <li>在本地克隆 Velero 项目存储库</li> <li>访问 S3 对象存储</li> <li>克隆您想要更改和部署的任何提供程序插件 (可选的，必须配置为由 Velero Tilt 的设置部署，更多信息见下)</li> </ol> <p>注意: 要正确配置你使用的任何插件，请参考插件文档。</p> <h2 id=33>3.3 入门<a class=headerlink href=#33 title="Permanent link">&para;</a></h2> <h3 id=331>3.3.1 配置<a class=headerlink href=#331 title="Permanent link">&para;</a></h3> <ul> <li>将 velero/tilt-resources/examples 下的所有示例文件复制到 velero/tilt-resources 中。</li> <li>配置 velero_v1_backupstoragelocation.yaml 文件和存储凭证/密钥的云文件。</li> <li>运行<code>tilt up</code></li> </ul> <h3 id=332-tilt>3.3.2 创建 tilt 设置文件<a class=headerlink href=#332-tilt title="Permanent link">&para;</a></h3> <p>创建一个名为tilt-settings.json 的配置文件，并将其放在velero/tilt-resources 的本地副本中。或者，您可以复制并粘贴在 velero/tilt-resources/examples 中找到的示例文件。</p> <p>例如：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=nt>&quot;default_registry&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>&quot;enable_providers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>        </span><span class=s2>&quot;aws&quot;</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>        </span><span class=s2>&quot;gcp&quot;</span><span class=p>,</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>        </span><span class=s2>&quot;azure&quot;</span><span class=p>,</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>        </span><span class=s2>&quot;csi&quot;</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=p>],</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>    </span><span class=nt>&quot;providers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>        </span><span class=nt>&quot;aws&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;../velero-plugin-for-aws&quot;</span><span class=p>,</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>        </span><span class=nt>&quot;gcp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;../velero-plugin-for-gcp&quot;</span><span class=p>,</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>        </span><span class=nt>&quot;azure&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;../velero-plugin-for-microsoft-azure&quot;</span><span class=p>,</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>        </span><span class=nt>&quot;csi&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;../velero-plugin-for-csi&quot;</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>    </span><span class=nt>&quot;allowed_contexts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>        </span><span class=s2>&quot;development&quot;</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>    </span><span class=p>],</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=nt>&quot;enable_restic&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class=nt>&quot;create_backup_locations&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>    </span><span class=nt>&quot;setup-minio&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>    </span><span class=nt>&quot;enable_debug&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>    </span><span class=nt>&quot;debug_continue_on_start&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=p>}</span>
</code></pre></div> <h3 id=333-tilt-settingsjson>3.3.3 tilt-settings.json 字段<a class=headerlink href=#333-tilt-settingsjson title="Permanent link">&para;</a></h3> <ul> <li><strong>default_registry</strong>：(String, default=”")，如果你需要推送镜像到镜像仓库需要改字段，更详细可参考：<a href=https://docs.tilt.dev/api.html#api.default_registry>Tilt *documentation</a></li> <li><strong>provider_repos</strong>：(Array[]String, default=[])，您要更改的所有提供程序插件的路径列表。每个提供者必须有一个tilt-provider.json 文件来描述如何构建提供者。</li> <li> <p><strong>enable_providers</strong> (Array[]String, default=[]):要启用的提供程序插件列表。更多详细信息请参阅提供程序插件。注意: 当不对插件进行更改时，不需要将它们加载到 Tilt 中: 可以在 Velero 部署中指定一个现有的映像和版本，Tilt 将加载这些内容。</p> </li> <li> <p><strong>allowed_contexts</strong> (Array, default=[]):允许 Tilt 使用的 kubeconfig 上下文列表。有关更多详细信息，请参阅关于 *allow_k8s_contexts 的 Tilt 文档。注意： Kind 是自动允许的。</p> </li> <li><strong>enable_restic</strong> (Bool, default=false):指示是否部署restic Daemonset。如果设置为 true，Tilt 将查找包含 Velero restic DaemonSet 配置的 velero/tilt-resources/restic.yaml 文件。</li> <li><strong>create_backup_locations</strong> (Bool, default=false):指示是否创建一个或多个备份存储位置。如果设置为 true，Tilt 将查找 velero/tilt-resources/velero_v1_backupstoragelocation.yaml 文件，其中至少包含一个 Velero 备份存储位置的配置。</li> <li> <p><strong>setup-minio</strong> (Bool, default=false):如果要在集群内运行的 Minio 实例中配置备份存储位置，请将此配置为 true。</p> </li> <li> <p><strong>enable_debug</strong> (Bool, default=false):如果要使用 <a href=https://github.com/go-delve/delve>Delve</a> 调试 velero 进程，请将此配置为 true。</p> </li> <li><strong>debug_continue_on_start</strong> (Bool, default=true):如果您希望 velero 进程在调试模式下在启动时继续，请将此配置为 true。请参阅 <a href=https://github.com/go-delve/delve/blob/master/Documentation/usage/dlv.md>Delve CLI documentation</a> 文档。</li> </ul> <h2 id=34-kubernetes>3.4 创建要部署的 Kubernetes 资源文件<a class=headerlink href=#34-kubernetes title="Permanent link">&para;</a></h2> <p>在 velero/tilt-resources/examples 目录中，提供了所有需要的 Kubernetes 资源文件，以便随时使用示例。你只需要将它们移动到 velero/tilt-resources 级别。</p> <p>因为 Velero Kubernetes 的部署和恢复的 DaemonSet 包含所有要使用的插件的配置，所以这些资源的文件应该由用户提供，因此您可以选择加载哪个提供者插件作为 init 容器。目前，所提供的样例文件已经配置了 Velero 支持的所有插件，可以根据需要随意删除任何插件。</p> <p>为了使 Velero 完全运行，它还需要至少一个备份存储位置。提供了一个示例文件，需要使用对象存储的特定配置对其进行修改。请参阅下一小节以获得更多关于此的详细信息。</p> <h2 id=35-backup-storage-location>3.5 配置一个backup storage location<a class=headerlink href=#35-backup-storage-location title="Permanent link">&para;</a></h2> <p>您必须配置 velero/tilt-resources/velero _ v1 _ backupstoragellocation。根据您的存储提供程序使用适当的值。参考<a href=https://velero.io/plugins/ >plugin documentation</a>，了解特定提供者的备份存储位置配置需要哪些字段/值对。</p> <p>下面是为 Velero 配置备份存储位置的一些方法。</p> <h3 id=351>3.5.1 使用公有云存储<a class=headerlink href=#351 title="Permanent link">&para;</a></h3> <p>按照提供程序文档来配置存储。我们有一个所有已知对象存储提供程序的列表，以及相应的 Velero 插件。<a href=https://velero.io/docs/v1.5/supported-providers/ >list of all known object storage providers</a> </p> <h3 id=352-minio>3.5.2 使用MinIO作为对象存储<a class=headerlink href=#352-minio title="Permanent link">&para;</a></h3> <p>注意：要将 MinIO 用作对象存储，您需要使用 <a href=https://github.com/vmware-tanzu/velero-plugin-for-aws><code>AWS</code> plugin</a>，并将存储位置配置为将 spec.provider 设置为 aws，将 spec.config.region 设置为 minio。例子：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>config</span><span class=p>:</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">minio</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>s3ForcePathStyle</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>s3Url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://minio.velero.svc:9000</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>  </span><span class=nt>objectStorage</span><span class=p>:</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=nt>bucket</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">velero</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>  </span><span class=nt>provider</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">aws</span>
</code></pre></div> <p>以下是使用 MinIO 作为存储的两种方法:</p> <ol> <li>作为在集群内运行的 MinIO 实例（不要在生产环境中这样做！）</li> </ol> <p>在tilt-settings.json 文件中，设置“setup-minio”：true。这将配置一个 Kubernetes 部署，其中包含集群内正在运行的 MinIO 实例。在集群外公开 MinIO 需要额外的步骤( <a href=https://velero.io/docs/v1.5/contributions/minio/#expose-minio-outside-your-cluster-with-a-service>extra steps</a>)。</p> <p>要访问这个存储，您需要使用 kubectl port-forward-n svc/MinIO 9000将 MinIO 端口转发到本地计算机，从而在集群之外暴露 MinIO。通过在 BSL 配置中添加 publicUrl: <a href=http://localhost:9000>http://localhost:9000</a>，更新 BSL 配置，将其作为其“公共 URL”。这对于下载备份文件是必要的。</p> <p>注意：使用此设置，当您的集群终止时，其中的存储和任何备份/恢复也会终止。</p> <ol> <li>作为在 Docker 容器中本地运行的独立 MinIO 实例 请参阅<a href=https://github.com/vmware-tanzu/velero/discussions/3381>these instructions</a>以在您的计算机上本地运行 MinIO，作为独立的而不是在 Pod 上运行它。</li> </ol> <p>请参阅我们的<a href=https://velero.io/docs/v1.5/locations/ >locations documentation</a>以了解更多备份位置的工作原理。</p> <h2 id=36-secret>3.6 配置提供者凭据（secret）<a class=headerlink href=#36-secret title="Permanent link">&para;</a></h2> <p>无论您使用什么对象存储提供程序，都要在 velero/tilt-resources/cloud 文件中配置凭据。阅读插件文档，了解提供者的凭据需要哪些字段/值对。Tilt 文件将调用 Kustomize 在硬编码的密钥 secret.cloud-credentials 下创建秘密。名称空间中的 data.cloud。在 velero/tilt-resources/examples/cloud 中，有一个为 MinIO 存储凭证正确格式化的示例凭证文件。</p> <h2 id=37-delve>3.7 使用 Delve 配置调试<a class=headerlink href=#37-delve title="Permanent link">&para;</a></h2> <p>如果您希望调试 Velero 进程，可以通过将字段 enable _ debug 设置为 true 在 tilt-resources/tile-settings 中启用调试模式。Json 文件。这将使您能够使用深入来调试进程。通过启用调试模式，将在调试模式下构建 Velero 可执行文件(使用 flags-gcflags = “-n-l”禁用优化和内联) ，并在使用 <a href=https://github.com/go-delve/delve/blob/master/Documentation/usage/dlv_exec.md><code>dlv exec</code></a>的 Velero 部署中启动该进程。</p> <p>调试服务器将接受端口2345上的连接，而 Tilt 被配置为将该端口转发到本地计算机。一旦 Tilt 运行并且 Velero 资源准备就绪，您就可以连接到调试服务器开始调试。要连接到会话，可以通过在本地运行 dlv connect 127.0.0.1:2345来使用深入的 CLI。有关如何使用深入研究的更多指导，请参阅 <a href=https://github.com/go-delve/delve/tree/master/Documentation/cli>Delve CLI documentation</a>。钻研也可以在许多<a href=https://github.com/go-delve/delve/blob/master/Documentation/EditorIntegration.md>editors and IDEs</a>.</p> <p>默认情况下，当处于调试模式时，Velero 进程将在启动时继续。这意味着进程将一直运行，直到设置了断点。可以通过在倾斜资源/平铺设置中将字段 debug _ continue _ on _ start 设置为 false 来禁用此选项。Json 文件。当此设置被禁用时，Velero 进程将不会继续运行，直到通过您的深入会话发出一个 continue 指令。</p> <p>退出调试会话时，CLI 和编辑器集成通常会询问是否应该停止远程进程。保持远程进程运行并断开与调试会话的连接非常重要。通过停止远程进程，这将导致 Velero 容器停止和荚重新启动。如果正在进行备份，那么这些备份将处于不新鲜状态，因为在 Velero pod 重新启动时它们不会恢复。</p> <h2 id=38-tilt>3.8 运行Tilt<a class=headerlink href=#38-tilt title="Permanent link">&para;</a></h2> <p>要启动您的开发环境，请运行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>tilt<span class=w> </span>up
</code></pre></div> <p>这将输出地址到一个网络浏览器界面，在那里你可以监视倾斜的状态和每个倾斜资源的日志。经过短暂的时间后，您应该已经有了一个正在运行的开发环境，现在应该能够创建备份/恢复并完全操作 Velero 了。</p> <p>注意：退出 Tilt 后运行倾斜向下将 Tiltfile 中指定的<a href=https://docs.tilt.dev/cli/tilt_down.html>will delete all resources</a> </p> <p>提示：为 velero/_tuiltbuild/local/velero 创建别名，您不必运行 make local 来获得 Velero CLI 的更新版本，只需使用别名即可。</p> <p>请参阅文档<a href=https://velero.io/docs/v1.5/how-velero-works/ >how Velero works</a>.</p> <h2 id=39>3.9 提供插件<a class=headerlink href=#39 title="Permanent link">&para;</a></h2> <p>提供者必须提供一个tilt-provider.json 文件来描述如何构建它。下面是一个例子：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;plugin_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;velero-plugin-for-aws&quot;</span><span class=p>,</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>&quot;context&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;.&quot;</span><span class=p>,</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>&quot;image&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;velero/velero-plugin-for-aws&quot;</span><span class=p>,</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=nt>&quot;live_reload_deps&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=s2>&quot;velero-plugin-for-aws&quot;</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>  </span><span class=p>],</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=nt>&quot;go_main&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;./velero-plugin-for-aws&quot;</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=p>}</span>
</code></pre></div> <h2 id=310>3.10 实时更新<a class=headerlink href=#310 title="Permanent link">&para;</a></h2> <p>每个配置为由 Velero 的 Tilt 设置部署的提供者插件都有一个 live _ reload_deps 列表。这定义了 Tilt 应该监视的文件和/或目录的更改。修改依赖项后，Tilt 在本地计算机上重新构建提供程序的二进制文件，将二进制文件复制到 init 容器，并触发 Velero 容器的重新启动。这比为每次更改重新生成容器映像要快得多。它还有助于保持每个开发映像的大小尽可能小(容器映像不需要整个 go 工具链、源代码、模块依赖性等)。</p> <h1 id=_3>四 从源代码构建<a class=headerlink href=#_3 title="Permanent link">&para;</a></h1> <h2 id=41>4.1 先决条件<a class=headerlink href=#41 title="Permanent link">&para;</a></h2> <ul> <li>访问 Kubernetes 集群，版本 1.7 或更高版本。 </li> <li>集群上的 DNS 服务器 </li> <li>安装了 kubectl </li> <li>Go 安装（最低版本 1.8）</li> </ul> <h2 id=42>4.2 获取源码<a class=headerlink href=#42 title="Permanent link">&para;</a></h2> <ul> <li>从最新源码获取</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>mkdir<span class=w> </span><span class=nv>$HOME</span>/go
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nb>export</span><span class=w> </span><span class=nv>GOPATH</span><span class=o>=</span><span class=nv>$HOME</span>/go
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>go<span class=w> </span>get<span class=w> </span>github.com/vmware-tanzu/velero<span class=w>   </span>
</code></pre></div> <p>哪里是 Go 的导入路径。 </p> <p>对于 Go 开发，建议将 Go 导入路径（本例中为 $HOME/go）添加到您的路径中。</p> <ul> <li>制定版本拉取</li> </ul> <p>从<a href=https://github.com/vmware-tanzu/velero/releases>release page</a>下载名为 Source code 的归档文件，并将其作为 src/ github.com/vmware-tanzu/velero </p> <p>文件在 Go 导入路径中解压缩。注意，Makefile 目标假定从 git 存储库构建。当从存档构建时，您只能使用下面描述的 go build 命令。</p> <h2 id=43>4.3 构建<a class=headerlink href=#43 title="Permanent link">&para;</a></h2> <p>根据您的需要，有许多不同的方法来建立 velero。这一节概述了主要的可能性。当使用 make 进行构建时，它将把二进制文件放在<code>_ output/bin/$GOOS/$GOARCH</code>下。例如，您可以在这里找到 darwin 的二进制文件: _ output/bin/darwin/amd64/velero，以及 linux 的二进制文件:<code>_ output/bin/linux/amd64/velero</code>。Make 还将拼接版本和 git 提交信息，以便 velero 版本显示适当的输出。</p> <p>注意: velero install 还将使用版本信息来确定要部署哪个标记的映像。如果您想覆盖部署的映像，请使用映像标志(参见下面关于如何构建映像的说明)。</p> <h2 id=44>4.4 构建二进制<a class=headerlink href=#44 title="Permanent link">&para;</a></h2> <p>要在本地机器上构建为操作系统和架构编译的 velero 二进制文件，请运行以下两个命令之一:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>go<span class=w> </span>build<span class=w> </span>./cmd/velero
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>make<span class=w> </span><span class=nb>local</span>
</code></pre></div> <h2 id=45>4.5 交叉编译<a class=headerlink href=#45 title="Permanent link">&para;</a></h2> <p>要在本地机器上的构建容器中构建针对 linux/amd64 的 velero 二进制文件，请运行：</p> <p>对于任何特定平台，运行 make build-<goos>-<goarch>。 例如，要为 Mac 构建，请运行 make build-darwin-amd64。 Velero 的 Makefile 有一个方便的目标，all-build，它构建以下平台：</p> <ul> <li>linux-amd64</li> <li>linux-arm</li> <li>linux-arm64</li> <li>linux-ppc64le</li> <li>darwin-amd64</li> <li>windows-amd64</li> </ul> <h2 id=46-velero>4.6 编译镜像和升级velero<a class=headerlink href=#46-velero title="Permanent link">&para;</a></h2> <p>如果在安装 Velero 后，您想将其部署使用的映像更改为包含您的代码更改的映像，您可以通过更新映像来实现：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>kubectl<span class=w> </span>-n<span class=w> </span>velero<span class=w> </span><span class=nb>set</span><span class=w> </span>image<span class=w> </span>deploy/velero<span class=w> </span><span class=nv>velero</span><span class=o>=</span>myimagerepo/velero:<span class=nv>$VERSION</span>
</code></pre></div> <p>要构建 Velero 容器映像，您需要先配置 buildx。</p> <h2 id=47-buildx>4.7 Buildx<a class=headerlink href=#47-buildx title="Permanent link">&para;</a></h2> <p>Docker Buildx 是一个 CLI 插件，它通过 Moby BuildKit builder 工具包提供的特性来扩展 Docker 命令。它提供了与 docker 构建相同的用户体验，并具有许多新特性，比如创建有作用域的构建实例和并发构建多个节点。</p> <p>更多信息可参考： <a href=https://docs.docker.com/buildx/working-with-buildx/ >docker docs</a> and in the <a href=https://github.com/docker/buildx>buildx github</a> repo.</p> <h2 id=48>4.8 镜像构建<a class=headerlink href=#48 title="Permanent link">&para;</a></h2> <p>设置 $REGISTRY 环境变量。例如，如果你想创建 gcr.io/my-REGISTRY/velero:main 图像，将 $REGISTRY 设置为 gcr.io/my-REGISTRY。如果未设置此变量，则默认值为 velero。</p> <p>可以选择，设置 ​$VERSION 环境变量来更改图像标记或 $BIN 来更改要为其构建容器图像的二进制文件。然后，跑:</p> <p>注意：要为 velero 和 velero-restic-restore-helper 构建构建容器镜像，请运行：make all-containers</p> <h2 id=49>4.9 将容器映像发布到注册表<a class=headerlink href=#49 title="Permanent link">&para;</a></h2> <p>要将容器映像发布到注册表，需要进行以下一次性设置：</p> <ol> <li> <p>如果您正在构建跨平台容器映像</p> </li> <li> <p><code>bash $ docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code></p> </li> <li> <p>创建并引导一个新的 docker buildx 构建器</p> </li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>$<span class=w> </span>docker<span class=w> </span>buildx<span class=w> </span>create<span class=w> </span>--use<span class=w> </span>--name<span class=w> </span>builder
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span>builder
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>$<span class=w> </span>docker<span class=w> </span>buildx<span class=w> </span>inspect<span class=w> </span>--bootstrap
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=o>[</span>+<span class=o>]</span><span class=w> </span>Building<span class=w> </span><span class=m>2</span>.6s<span class=w> </span><span class=o>(</span><span class=m>1</span>/1<span class=o>)</span><span class=w> </span><span class=nv>FINISHED</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=o>=</span>&gt;<span class=w> </span><span class=o>[</span>internal<span class=o>]</span><span class=w> </span>booting<span class=w> </span>buildkit<span class=w>                                </span><span class=m>2</span>.6s
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=o>=</span>&gt;<span class=w> </span><span class=o>=</span>&gt;<span class=w> </span>pulling<span class=w> </span>image<span class=w> </span>moby/buildkit:buildx-stable-1<span class=w>             </span><span class=m>1</span>.9s
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>  </span><span class=o>=</span>&gt;<span class=w> </span><span class=o>=</span>&gt;<span class=w> </span>creating<span class=w> </span>container<span class=w> </span>buildx_buildkit_builder0<span class=w>             </span><span class=m>0</span>.7s
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>Name:<span class=w>   </span>builder
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>Driver:<span class=w> </span>docker-container
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>Nodes:
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>Name:<span class=w>      </span>builder0
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>Endpoint:<span class=w>  </span>unix:///var/run/docker.sock
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>Status:<span class=w>    </span>running
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>Platforms:<span class=w> </span>linux/amd64,<span class=w> </span>linux/arm64,<span class=w> </span>linux/ppc64le,<span class=w> </span>linux/s390x,<span class=w> </span>linux/386,<span class=w> </span>linux/arm/v7,<span class=w> </span>linux/arm/v6
</code></pre></div> <p>注意：如果没有上述设置， docker buildx inspect --bootstrap 的输出将是：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>$<span class=w> </span>docker<span class=w> </span>buildx<span class=w> </span>inspect<span class=w> </span>--bootstrap
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>Name:<span class=w>   </span>default
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>Driver:<span class=w> </span>docker
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>Nodes:
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>Name:<span class=w>      </span>default
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>Endpoint:<span class=w>  </span>default
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>Status:<span class=w>    </span>running
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>Platforms:<span class=w> </span>linux/amd64,<span class=w> </span>linux/arm64,<span class=w> </span>linux/ppc64le,<span class=w> </span>linux/s390x,<span class=w> </span>linux/386,<span class=w> </span>linux/arm/v7,<span class=w> </span>linux/arm/v6
</code></pre></div> <p>并且 REGISTRY=myrepo BUILDX_OUTPUT_TYPE=registry make 容器将失败并显示以下错误</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>$<span class=w> </span><span class=nv>REGISTRY</span><span class=o>=</span>ashishamarnath<span class=w> </span><span class=nv>BUILDX_PLATFORMS</span><span class=o>=</span>linux/arm64<span class=w> </span><span class=nv>BUILDX_OUTPUT_TYPE</span><span class=o>=</span>registry<span class=w> </span>make<span class=w> </span>container
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>auto-push<span class=w> </span>is<span class=w> </span>currently<span class=w> </span>not<span class=w> </span>implemented<span class=w> </span><span class=k>for</span><span class=w> </span>docker<span class=w> </span>driver
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>make:<span class=w> </span>***<span class=w> </span><span class=o>[</span>container<span class=o>]</span><span class=w> </span>Error<span class=w> </span><span class=m>1</span>
</code></pre></div> <p>完成上述一次性设置后，现在 docker buildx inspect --bootstrap 的输出应该是这样的</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>$<span class=w> </span>docker<span class=w> </span>buildx<span class=w> </span>inspect<span class=w> </span>--bootstrap
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>Name:<span class=w>   </span>builder
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>Driver:<span class=w> </span>docker-container
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>Nodes:
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>Name:<span class=w>      </span>builder0
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>Endpoint:<span class=w>  </span>unix:///var/run/docker.sock
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>Status:<span class=w>    </span>running
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>Platforms:<span class=w> </span>linux/amd64,<span class=w> </span>linux/arm64,<span class=w> </span>linux/riscv64,<span class=w> </span>linux/ppc64le,<span class=w> </span>linux/s390x,<span class=w> </span>linux/386,<span class=w> </span>linux/arm/v7,<span class=w> </span>linux/arm/v
</code></pre></div> <p>现在通过运行 make container 命令并将 $BUILDX_OUTPUT_TYPE 设置为 registry 来构建和推送容器镜像</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>$<span class=w> </span><span class=nv>REGISTRY</span><span class=o>=</span>myrepo<span class=w> </span><span class=nv>BUILDX_OUTPUT_TYPE</span><span class=o>=</span>registry<span class=w> </span>make<span class=w> </span>container
</code></pre></div> <h2 id=410>4.10 跨平台编译<a class=headerlink href=#410 title="Permanent link">&para;</a></h2> <p>支持的 Docker buildx 平台：</p> <ul> <li><code>linux/amd64</code></li> <li><code>linux/arm64</code></li> <li><code>linux/arm/v7</code></li> <li><code>linux/ppc64le</code></li> </ul> <p>对于任何特定平台，运行 BUILDX_PLATFORMS=<goos>/<goarch> make container </p> <p>例如，要为 arm64 构建映像，请运行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nv>BUILDX_PLATFORMS</span><span class=o>=</span>linux/arm64<span class=w> </span>make<span class=w> </span>container
</code></pre></div> <p>注意：默认情况下，$BUILDX_PLATFORMS 设置为 linux/amd64 使用 buildx，您还可以同时构建所有支持的平台并将多架构映像推送到注册表。例如：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nv>REGISTRY</span><span class=o>=</span>myrepo<span class=w> </span><span class=nv>VERSION</span><span class=o>=</span>foo<span class=w> </span><span class=nv>BUILDX_PLATFORMS</span><span class=o>=</span>linux/amd64,linux/arm64,linux/arm/v7,linux/ppc64le<span class=w> </span><span class=nv>BUILDX_OUTPUT_TYPE</span><span class=o>=</span>registry<span class=w> </span>make<span class=w> </span>all-containers
</code></pre></div> <p>注意: 当同时为多于1个平台构建时，您需要将 BUILDX _ output _ type 设置为注册表，因为本地多拱图像尚不受支持。注意: 如果你想更新图片但不改变它的名字，你必须触发 Kubernetes 选择新的图片。一种方法是删除 Velero 部署 pod:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>kubectl<span class=w> </span>-n<span class=w> </span>velero<span class=w> </span>delete<span class=w> </span>pods<span class=w> </span>-l<span class=w> </span><span class=nv>deploy</span><span class=o>=</span>velero
</code></pre></div> <h1 id=_4>五 本地运行<a class=headerlink href=#_4 title="Permanent link">&para;</a></h1> <p>在开发中本地运行 Velero</p> <p>在本地运行 Velero 服务器可以加速迭代开发。这样就无需在每次更改时重建 Velero 服务器映像并将其重新部署到集群中。</p> <h2 id=51-velero>5.1 使用远程集群在本地运行 Velero<a class=headerlink href=#51-velero title="Permanent link">&para;</a></h2> <p>Velero 以 Kubernetes API 服务器作为端点(根据 kubeconfig 配置)运行，因此 Velero 服务器和客户机使用相同的客户机-go 与 Kubernetes 进行通信。这意味着 Velero 服务器可以像在远程集群中运行一样在本地运行。</p> <h2 id=52>5.2 先决条件<a class=headerlink href=#52 title="Permanent link">&para;</a></h2> <p>在运行 Velero 时，您需要确保设置以下所有权限: </p> <ul> <li>从源集群和名称空间读取所有数据的访问权限</li> <li>对来自源集群和命名空间的所有数据的读取权限</li> <li> <p>写访问目标集群和命名空间</p> </li> <li> <p>写访问目标集群和命名空间</p> </li> <li>对卷的读/写访问</li> <li>对备份数据的对象存储进行读/写访问</li> <li><a href=https://velero.io/docs/v1.5/api-types/backupstoragelocation/ >BackupStorageLocation</a>Velero 服务器的对象定义</li> <li>可选<a href=https://velero.io/docs/v1.5/api-types/volumesnapshotlocation/ >VolumeSnapshotLocation</a> Velero 服务器的对象定义，用于拍摄 PV 快照</li> </ul> <h2 id=53>5.3 步骤<a class=headerlink href=#53 title="Permanent link">&para;</a></h2> <h3 id=531-velero>5.3.1 安装velero<a class=headerlink href=#531-velero title="Permanent link">&para;</a></h3> <p>请参阅有关如何在某些特定提供商中安装 Velero 的文档：<a href=https://velero.io/docs/v1.5/basic-install/ >Install overview</a></p> <h3 id=532>5.3.2 将部署规模缩小到零<a class=headerlink href=#532 title="Permanent link">&para;</a></h3> <p>使用 velero install 命令将 Velero 安装到集群中后，您将 Velero 部署缩小到 0，这样它就不会同时在远程集群上运行，并可能导致事情不同步：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>kubectl scale --replicas=0 deployment velero -n velero
</code></pre></div> <h3 id=533-velero>5.3.3 在本地启动Velero服务器<a class=headerlink href=#533-velero title="Permanent link">&para;</a></h3> <ul> <li> <p>要在本地运行服务器，请根据所需的二进制文件使用完整路径。例如，如果您使用 Mac，并使用 AWS 作为提供程序，下面是如何使用完整路径运行从源代码构建的二进制文件: <code>AWS_SHARED_CREDENTIALS_FILE=&lt;path-to-credentials-file&gt; ./_output/bin/darwin/amd64/velero</code>.或者，您可以将 velero 二进制文件添加到 PATH 中。</p> </li> <li> <p>启动服务器：velero 服务器 [CLI 标志]。以下 CLI 标志可能有助于自定义，但请参阅 velero server --help 以获取完整详细信息：</p> </li> <li>--log-level：设置 Velero 服务器的日志级别（默认信息，使用 debug 进行最多的日志记录）</li> <li>--kubeconfig：设置 Velero 服务器用来与 Kubernetes apiserver 通信的 kubeconfig 文件的路径（默认为 $ KUBECONFIG）</li> <li>--namespace：Velero 服务器应在其中查找备份、计划、恢复的集合命名空间（默认 velero）</li> <li>--plugin-dir：设置Velero服务器查找插件的目录（默认/plugins）<ul> <li>--plugin-dir 标志要求插件二进制文件存在于本地，并应设置为包含此构建二进制文件的目录。</li> </ul> </li> <li>--metrics-address：设置暴露 Prometheus 指标的绑定地址和端口（默认：8085）</li> </ul> <h1 id=_5>六 代码标准<a class=headerlink href=#_5 title="Permanent link">&para;</a></h1> <h2 id=61-pr>6.1 打卡一个pr<a class=headerlink href=#61-pr title="Permanent link">&para;</a></h2> <p>当开启拉取请求时，请填写提供模板的清单。这将帮助其他人正确地分类和审查您的拉请求。</p> <h2 id=62>6.2 添加更新日志<a class=headerlink href=#62 title="Permanent link">&para;</a></h2> <p>作者需要在其拉取请求中包含一个更改日志文件。更改日志文件应该是在更改日志/未发布文件夹中创建的新文件。文件应该遵循 pr-用户名的变数命名原则，文件的内容应该是你的文本更新日志。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>velero/changelogs/unreleased   &lt;- folder
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>    000-username            &lt;- file
</code></pre></div> <p>将其添加到 PR 中。</p> <p>如果 PR 不保证更改日志，则可以通过在 PR 上应用 changelog-not-required 标签来跳过对更改日志的 CI 检查。</p> <h2 id=63>6.3 版权头部<a class=headerlink href=#63 title="Permanent link">&para;</a></h2> <p>每当修改源代码文件时，版权声明应该更新为我们的标准版权声明。也就是说，它应该读作“ Velero 贡献者的版权”对于新文件，必须添加完整的版权和许可标题。请注意，文档文件不需要版权标题。</p> <h2 id=64>6.4 代码<a class=headerlink href=#64 title="Permanent link">&para;</a></h2> <ul> <li>日志消息大写。</li> <li>错误消息保持小写。</li> <li> <p>仅对从非 velero 代码直接返回的错误（例如对 Kubernetes 服务器的 API 调用）包装/添加堆栈。</p> </li> <li> <p><code>bash errors.WithStack(err)</code></p> </li> <li> <p>更喜欢使用 Kubernetes 包集中的实用程序。</p> </li> <li> <p><code>bash k8s.io/apimachinery/pkg/util/sets</code></p> </li> </ul> <h2 id=65>6.5 导包<a class=headerlink href=#65 title="Permanent link">&para;</a></h2> <p>对于导入，我们使用以下约定：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>&lt;group&gt;&lt;version&gt;&lt;api<span class=w> </span><span class=p>|</span><span class=w> </span>client<span class=w> </span><span class=p>|</span><span class=w> </span>informer<span class=w> </span><span class=p>|</span><span class=w> </span>...&gt;
</code></pre></div> <p>Example</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=kn>import</span><span class=w> </span><span class=p>(</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=nx>corev1api</span><span class=w> </span><span class=s>&quot;k8s.io/api/core/v1&quot;</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>    </span><span class=nx>metav1</span><span class=w> </span><span class=s>&quot;k8s.io/apimachinery/pkg/apis/meta/v1&quot;</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=nx>corev1client</span><span class=w> </span><span class=s>&quot;k8s.io/client-go/kubernetes/typed/core/v1&quot;</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=nx>corev1listers</span><span class=w> </span><span class=s>&quot;k8s.io/client-go/listers/core/v1&quot;</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=nx>velerov1api</span><span class=w> </span><span class=s>&quot;github.com/vmware-tanzu/velero/pkg/apis/velero/v1&quot;</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=nx>velerov1client</span><span class=w> </span><span class=s>&quot;github.com/vmware-tanzu/velero/pkg/generated/clientset/versioned/typed/velero/v1&quot;</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=p>)</span>
</code></pre></div> <h2 id=66-mocks>6.6 Mocks<a class=headerlink href=#66-mocks title="Permanent link">&para;</a></h2> <p>我们使用一个包来为我们的接口生成模拟。</p> <p>示例：如果你想改变这个模拟:<a href=https://github.com/vmware-tanzu/velero/blob/v1.5.1/pkg/restic/mocks/restorer.go>https://github.com/vmware-tanzu/velero/blob/v1.5.1/pkg/restic/mocks/restorer.go</a></p> <p>运行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>go<span class=w> </span>get<span class=w> </span>github.com/vektra/mockery/.../
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=nb>cd</span><span class=w> </span>pkg/restic
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>mockery<span class=w> </span>-name<span class=o>=</span>Restorer
</code></pre></div> <p>可能需要运行 make update 来更新导入。</p> <h2 id=67-kubernetes>6.7 Kubernetes 标签<a class=headerlink href=#67-kubernetes title="Permanent link">&para;</a></h2> <p>在生成标签值时，请确保将它们传递到标签中。GetValidName () helper 函数。这将有助于确保值是要存储和查询的适当长度和格式。一般来说，uid 作为标签值持久存在是安全的。此函数与没有限制的注释值无关。</p> <h2 id=68-dco-sign-off>6.8 DCO Sign off<a class=headerlink href=#68-dco-sign-off title="Permanent link">&para;</a></h2> <p>该项目的所有作者保留对其作品的版权。然而，为了确保他们只提交他们有权的作品，我们要求每个人通过签署他们的作品来承认这一点。</p> <p>本 repo 中的任何版权声明都应将作者指定为“Velero 贡献者”。</p> <p>要在你的作品上签名，只需要在提交消息的末尾加上这样一行:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>Signed-off-by: Joe Beda &lt;joe@heptio.com&gt;
</code></pre></div> <p>这可以通过 git commit 的 --signoff 选项轻松完成。</p> <p>通过这样做，您声明您可以证明以下内容：(from <a href=https://developercertificate.org/ >https://developercertificate.org/</a>):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>Developer Certificate of Origin
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>Version 1.1
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>Copyright (C) 2004, 2006 The Linux Foundation and its contributors.
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>1 Letterman Drive
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>Suite D4700
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>San Francisco, CA, 94129
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>Everyone is permitted to copy and distribute verbatim copies of this
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a>license document, but changing it is not allowed.
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>Developer&#39;s Certificate of Origin 1.1
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>By making a contribution to this project, I certify that:
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>
<a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>(a) The contribution was created in whole or in part by me and I
<a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a>    have the right to submit it under the open source license
<a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>    indicated in the file; or
<a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a>
<a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a>(b) The contribution is based upon previous work that, to the best
<a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a>    of my knowledge, is covered under an appropriate open source
<a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>    license and I have the right under that license to submit that
<a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a>    work with modifications, whether created in whole or in part
<a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a>    by me, under the same open source license (unless I am
<a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a>    permitted to submit under a different license), as indicated
<a id=__codelineno-24-27 name=__codelineno-24-27 href=#__codelineno-24-27></a>    in the file; or
<a id=__codelineno-24-28 name=__codelineno-24-28 href=#__codelineno-24-28></a>
<a id=__codelineno-24-29 name=__codelineno-24-29 href=#__codelineno-24-29></a>(c) The contribution was provided directly to me by some other
<a id=__codelineno-24-30 name=__codelineno-24-30 href=#__codelineno-24-30></a>    person who certified (a), (b) or (c) and I have not modified
<a id=__codelineno-24-31 name=__codelineno-24-31 href=#__codelineno-24-31></a>    it.
<a id=__codelineno-24-32 name=__codelineno-24-32 href=#__codelineno-24-32></a>
<a id=__codelineno-24-33 name=__codelineno-24-33 href=#__codelineno-24-33></a>(d) I understand and agree that this project and the contribution
<a id=__codelineno-24-34 name=__codelineno-24-34 href=#__codelineno-24-34></a>    are public and that a record of the contribution (including all
<a id=__codelineno-24-35 name=__codelineno-24-35 href=#__codelineno-24-35></a>    personal information I submit with it, including my sign-off) is
<a id=__codelineno-24-36 name=__codelineno-24-36 href=#__codelineno-24-36></a>    maintained indefinitely and may be redistributed consistent with
<a id=__codelineno-24-37 name=__codelineno-24-37 href=#__codelineno-24-37></a>    this project or the open source license(s) involved.
</code></pre></div> <h1 id=_6>六 网站引导<a class=headerlink href=#_6 title="Permanent link">&para;</a></h1> <h2 id=61>6.1 本地运行<a class=headerlink href=#61 title="Permanent link">&para;</a></h2> <p>对网站进行更改时，请在提交 PR 之前在本地运行该网站并手动验证您的更改。 在项目的根目录，运行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>make<span class=w> </span>serve-docs
</code></pre></div> <p>这会在容器中运行所有 Hugo 依赖项。 或者，为了快速加载网站，在 velero/site/ 目录下运行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>hugo<span class=w> </span>serve
</code></pre></div> <p>有关如何在本地运行网站的更多信息，请参阅我们的 <a href=https://gohugo.io/getting-started/ >Hugo documentation</a>。</p> <h2 id=62_1>6.2 添加博客文章<a class=headerlink href=#62_1 title="Permanent link">&para;</a></h2> <p>要添加博客文章，请在 /site/content/posts/ 文件夹中创建一个新的 Markdown (.MD) 文件。一篇博客文章需要以下前言。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Title</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>blog&quot;</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=nt>excerpt</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Brief summary of thee blog post that appears as a preview on velero.io/blogs</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=nt>author_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Jane Smith</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nt>slug</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">URL-For-Blog</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=c1># Use different categories that apply to your blog. This is used to connect related blogs on the site</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=nt>categories</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&#39;velero&#39;</span><span class="p p-Indicator">,</span><span class=s>&#39;release&#39;</span><span class="p p-Indicator">]</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=c1># Image to use for blog. The path is relative to the site/static/ folder</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/img/posts/example-image.jpg</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=c1># Tag should match author to drive author pages. Tags can have multiple values.</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&#39;Velero</span><span class=nv> </span><span class=s>Team&#39;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&#39;Nolan</span><span class=nv> </span><span class=s>Brubaker&#39;</span><span class="p p-Indicator">]</span>
</code></pre></div> <p>例如，在标签字段中包含 author_name 值，以便列出作者帖子的页面可以正常工作，<a href=https://velero.io/tags/carlisia-campos/ >https://velero.io/tags/carlisia-campos/</a>.</p> <p>理想情况下，每个博客都有一个独特的图像可以在博客主页上使用，但如果您不包含图像，则将使用默认的 Velero 徽标。使用小于 70KB 的图像并将其添加到 /site/static/img/posts 文件夹。</p> <h1 id=_7>七 文档风格<a class=headerlink href=#_7 title="Permanent link">&para;</a></h1> <p>参考：<a href=https://velero.io/docs/v1.5/style-guide/ >https://velero.io/docs/v1.5/style-guide/</a></p> <h1 id=_8>参考链接<a class=headerlink href=#_8 title="Permanent link">&para;</a></h1> <ul> <li><a href=https://github.com/tilt-dev/tilt>https://github.com/tilt-dev/tilt</a></li> <li><a href=https://tilt.dev/ >https://tilt.dev/</a></li> <li><a href=https://velero.io/docs/v1.5/tilt/ >https://velero.io/docs/v1.5/tilt/</a></li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/redhatxl/redhatxl.github.io/issues/new/?title=[Feedback]+Velero%20%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91+-+/cloud-native/operator/tools/velero/Velero%20%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91/" target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2016 - 2024 kaliarch </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/redhatxl target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20220125122524.png target=_blank rel=noopener title=kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154zm-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4zm-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2zM563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4zm-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6zm107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">同意</button> <label class=md-button for=__settings>管理设定</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../../../../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../../../assets/javascripts/bundle.bd41221c.min.js></script> </body> </html>
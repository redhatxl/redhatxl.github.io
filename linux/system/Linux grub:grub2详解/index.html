<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="stay hungry,stay foolish"><meta name=author content=Kaliarch><link href=https://redhatxl.github.io/linux/system/Linux%20grub%3Agrub2%E8%AF%A6%E8%A7%A3/ rel=canonical><link href=../../../develop/Golang/golang%20%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/ rel=prev><link href=../Linux%20%E5%86%85%E6%A0%B8%E5%BC%95%E5%AF%BC%E8%AF%A6%E8%A7%A3/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.16"><title>Linux grub/grub2详解 - Kaliarch Blog</title><link rel=stylesheet href=../../../assets/stylesheets/main.bcfcd587.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-G9D2HRH134"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-G9D2HRH134",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-G9D2HRH134",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#linux-grubgrub2 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title="Kaliarch Blog" class="md-header__button md-logo" aria-label="Kaliarch Blog" data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Kaliarch Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Linux grub/grub2详解 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/redhatxl/redhatxl.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> redhatxl.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../cloud-native/develop/01-k8s%20%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D/ class=md-tabs__link> 云原生 </a> </li> <li class=md-tabs__item> <a href=../../../devops/Gitlab%20CI/01%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8B%E5%AE%9E%E6%88%98Gitlab%20CI/ class=md-tabs__link> devops </a> </li> <li class=md-tabs__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-tabs__link> 开发技术 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../other/ class=md-tabs__link> 其他 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Kaliarch Blog" class="md-nav__button md-logo" aria-label="Kaliarch Blog" data-md-component=logo> <img src=../../../assets/images/logo.png alt=logo> </a> Kaliarch Blog </label> <div class=md-nav__source> <a href=https://github.com/redhatxl/redhatxl.github.io title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> redhatxl.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> 首页 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> 云原生 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 云原生 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> 开发 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 开发 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/develop/01-k8s%20%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D/ class=md-nav__link> <span class=md-ellipsis> 1.K8s 开发概念简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/02-K8s%20API%20%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.K8s API访问方式 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/03-Client-go%20%E4%BD%BF%E7%94%A8/ class=md-nav__link> <span class=md-ellipsis> 3.Client-go 的使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/04-Cobra%20%2B%20Client-go%E5%AE%9E%E7%8E%B0K8s%E7%AE%80%E5%8D%95%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/ class=md-nav__link> <span class=md-ellipsis> 4.Cobra+Client-go实现K8s插件开发 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/05-client-go%E4%B9%8BListWatcher%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 5.Client-go源码分析之ListerWatcher </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/06-client-go%E4%B9%8BReflector%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 6.Client-go源码分析之Reflector </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/07-client-go%E4%B9%8BDeltaFIFO%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 7.Client-go源码分析之DeltaFIFO </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/08-client-go%E4%B9%8BInformer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 8.Client-go源码分析之Informer </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/09-client-go%E4%B9%8BSharedInformer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 9.Client-go源码分析之SharedInformer </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/10-client-go%E4%B9%8BIndexer%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 10.Client-go源码分析之Indexer </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/11-client-go%E4%B9%8BWorkqueue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> 11.Client-go源码分析之WorkQueue </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/12-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0Controller/ class=md-nav__link> <span class=md-ellipsis> 12.自定义实现Controller </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/13-%E8%AE%A4%E8%AF%86CRD/ class=md-nav__link> <span class=md-ellipsis> 13.认识CRD </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/x-Informer%E5%AE%9E%E6%88%98%E4%B9%8B%E6%8C%81%E4%B9%85%E5%8C%96K8s%E4%BA%8B%E4%BB%B6%E8%87%B3ElasticSearch/ class=md-nav__link> <span class=md-ellipsis> x-Informer实战之持久化K8s事件至ElasticSearch </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/develop/x-DeltaFIFO%E5%92%8Cindexer%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AF%B9%E6%AF%94/ class=md-nav__link> <span class=md-ellipsis> x-DeltaFIFO 与 Indexer关系 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> 运维 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 运维 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> <span class=md-ellipsis> 工具 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> 工具 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/K8s%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7%E4%B9%8BKUR8/ class=md-nav__link> <span class=md-ellipsis> K8s可视化工具之KUR8 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/K8s%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C%E5%B7%A5%E5%85%B7%E4%B9%8BK9s/ class=md-nav__link> <span class=md-ellipsis> K8s快捷操作工具之K9s </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/K8s%E8%89%B2%E5%BD%A9%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E4%B9%8Bkubecolor/ class=md-nav__link> <span class=md-ellipsis> K8s色彩输出工具之kubecolor </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/K8s%E6%97%A5%E5%BF%97%E6%9F%A5%E7%9C%8B%E7%A5%9E%E5%99%A8%E4%B9%8Bkubetail/ class=md-nav__link> <span class=md-ellipsis> K8s日志查看利器之kubetail </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/K8s%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E4%B9%8Bsniff/ class=md-nav__link> <span class=md-ellipsis> K8s 网络抓包之sniff </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/Kubernetes%E5%A4%87%E4%BB%BD%E8%BF%98%E5%8E%9F%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> Kubernetes 六款备份还原工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/k8s%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E4%B9%8Bkrew/ class=md-nav__link> <span class=md-ellipsis> k8s 插件管理工具之krew </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/%E6%9E%B6%E6%9E%84%E5%9B%BE%E7%A5%9E%E5%99%A8DaC%E4%B9%8BDiagram/ class=md-nav__link> <span class=md-ellipsis> 架构图神器DaC之Diagram </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/tools/%E4%BA%91%E5%8E%9F%E7%94%9F%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E4%B9%8Bvelero%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 云原生备份恢复之velero实战 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> <span class=md-ellipsis> 部署 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> 部署 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/operator/deploy/Ceph%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> Ceph机器安装部署 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E4%B9%8Bminikube/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BK3s/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之K3s </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BKind/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之Kind </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/deploy/%E6%9C%80%E5%B0%8F%E5%8C%96K8s%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E4%B9%8BMicroK8s/ class=md-nav__link> <span class=md-ellipsis> 最小化K8s环境部署之MicroK8s </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> <span class=md-ellipsis> servicemesh </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> servicemesh </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3_1> <label class=md-nav__link for=__nav_2_2_3_1 id=__nav_2_2_3_1_label tabindex=0> <span class=md-ellipsis> istio </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3_1> <span class="md-nav__icon md-icon"></span> istio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Envoy%E7%AC%94%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> Envoy笔记 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/服务网格进阶实战.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/详解.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E4%B9%8BXDS%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> Istio之XDS协议解析 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E7%AC%94%E8%AE%B0%E4%B9%8BGateway/ class=md-nav__link> <span class=md-ellipsis> Istio笔记之Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E7%AC%94%E8%AE%B0%E4%B9%8Bpilot/ class=md-nav__link> <span class=md-ellipsis> Istio笔记之pilot </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> Istio灰度发布 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio之流量管理.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E7%AE%80%E4%BB%8B%E5%8F%8A%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> Istio简介及架构 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E7%AC%94%E8%AE%B0%28%E4%B8%80%29/ class=md-nav__link> <span class=md-ellipsis> Istio微服务治理笔记(一) </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/Istio%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%9C%8D%E5%8A%A1%E7%BD%91%E7%BB%9C/ class=md-nav__link> <span class=md-ellipsis> Istio基础之服务网络 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/微服务金丝雀发布.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/servicemesh/istio/istio%E7%AC%94%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> istio笔记 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <label class=md-nav__link for=__nav_2_2_4 id=__nav_2_2_4_label tabindex=0> <span class=md-ellipsis> 排错 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> 排错 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/operator/other/k8s%20%E9%9B%86%E7%BE%A4etcd%E6%8E%92%E9%94%99/ class=md-nav__link> <span class=md-ellipsis> k8s 集群etcd排错 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/other/CronHPA/ class=md-nav__link> <span class=md-ellipsis> CronHPA初探 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/other/%E8%AE%B0%E4%B8%80%E6%AC%A1K8smaster%20%E8%8A%82%E7%82%B9%E4%B8%80%E6%AC%A1%E6%8E%92%E9%94%99%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 记一次K8smaster 节点一次排错实战 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/operator/other/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%BA%BF%E4%B8%8Ak8s%E8%8A%82%E7%82%B9%E7%BB%B4%E6%8A%A4/ class=md-nav__link> <span class=md-ellipsis> 记一次线上k8s节点维护 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5> <label class=md-nav__link for=__nav_2_2_5 id=__nav_2_2_5_label tabindex=0> <span class=md-ellipsis> 容器 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_5> <span class="md-nav__icon md-icon"></span> 容器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/Dockerfile%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Dockerfile 最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/Docker%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> Docker底层原理 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/podman%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Podman详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/%E5%88%A9%E7%94%A8katacoda%20%E5%AE%9E%E7%8E%B0%E6%8B%89%E5%8F%96%E5%9B%BD%E5%A4%96%E9%95%9C%E5%83%8F/ class=md-nav__link> <span class=md-ellipsis> 利用katacoda实现拉取国外镜像 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/%E9%95%9C%E5%83%8F%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/ class=md-nav__link> <span class=md-ellipsis> 镜像底层原理 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%B9%E5%99%A8/Harbor%E5%92%8Cregistry%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E9%83%A8%E7%BD%B2/ class=md-nav__link> <span class=md-ellipsis> Harbor/registry镜像仓库部署 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> 安全 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 安全 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BKube-bench/ class=md-nav__link> <span class=md-ellipsis> K8s 安全之Kube-bench </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubeeye%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> KubeEye源码分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BKubeeye/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之KubeEye </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BNPD/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之NPD </span> </a> </li> <li class=md-nav__item> <a href="../../../cloud-native/安全/Kubernetes安全之Open/ Policy/ Agent.md" class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8Bopenebs/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全之openebs </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E5%88%86%E6%9E%90/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/kubernetes%E5%AE%89%E5%85%A8%E4%B9%8BPolaris/ class=md-nav__link> <span class=md-ellipsis> kubernetes安全之Polaris </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/Kubernetes%E5%AE%89%E5%85%A8%E4%B9%8Bkubescape/ class=md-nav__link> <span class=md-ellipsis> Kubernetes安全扫描之kubescape </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8%E4%B9%8BTrivy/ class=md-nav__link> <span class=md-ellipsis> 镜像安全扫描之Trivy </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/%E5%AE%89%E5%85%A8/%E5%BC%80%E6%BA%90%E5%AE%B9%E5%99%A8%E5%AE%89%E5%85%A8%E5%B9%B3%E5%8F%B0%E4%B9%8BNeuVector/ class=md-nav__link> <span class=md-ellipsis> 开源容器安全平台之NeuVector </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud-native/other/inside-kubernetes%20controller/ class=md-nav__link> <span class=md-ellipsis> Inside Kubernetes controller </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/Kubectl插件开发及开业分享.md class=md-nav__link> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/KubeEdge/ class=md-nav__link> <span class=md-ellipsis> KubeEdge初探 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/Kubernetes%E5%BC%80%E5%8F%91%E6%8E%92%E9%94%99%E6%9D%82%E8%AE%B0/ class=md-nav__link> <span class=md-ellipsis> Kubernetes开发排错杂记 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/Kubernetes%E7%94%9F%E6%88%90kubeconfig/ class=md-nav__link> <span class=md-ellipsis> Kubernetes生成kubeconfig </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/%E5%8D%8E%E4%B8%BA%E4%BA%91%E5%8E%9F%E7%94%9FCCE%E5%AE%9E%E6%88%98/ class=md-nav__link> <span class=md-ellipsis> 华为云原生CCE实战 </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3-Kong/ class=md-nav__link> <span class=md-ellipsis> 微服务API网关-Kong </span> </a> </li> <li class=md-nav__item> <a href=../../../cloud-native/other/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E4%B8%AD10%E7%A7%8D%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 微服务架构中10种常用设计模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> devops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> devops </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> GitLab CI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> GitLab CI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/01%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8B%E5%AE%9E%E6%88%98Gitlab%20CI/ class=md-nav__link> <span class=md-ellipsis> 1.敏捷无敌之Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/02%E6%95%8F%E6%8D%B7%E6%97%A0%E6%95%8C%E4%B9%8BGitlab%20CI%E6%9E%B6%E6%9E%84%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> 2.敏捷无敌之Gitlab CI架构流程详解 </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/03%E5%AE%9E%E6%88%98Gitlab%20CI%20%2B%20Supervisor%20%E5%8F%91%E5%B8%83Python%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 3.实战Gitlab CI + Supervisor 发布Python项目 </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/04%E5%AE%9E%E6%88%98%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%8F%8A%E6%B7%B7%E5%90%88%E7%8E%AF%E5%A2%83Gitlab%20CI/ class=md-nav__link> <span class=md-ellipsis> 4.实战前后端项目及混合环境Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/05%E5%AE%9E%E6%88%98Gitlab%20CI%20%2B%20Kubernetes%20%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83/ class=md-nav__link> <span class=md-ellipsis> 5.实战Kubernetes Gitlab CI </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/Gitlab%20CI%E4%B9%8B%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F/ class=md-nav__link> <span class=md-ellipsis> Gitlab CI之单元测试和代码扫描 </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/Gitlab%20CI/Gitlab%20CI%E8%BF%9B%E9%98%B6%E4%B9%8B%E5%85%B1%E4%BA%ABCI%E5%BA%93/ class=md-nav__link> <span class=md-ellipsis> Gitlab CI进阶之共享CI库 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> IaC </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> IaC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/IaC/Terraform/IaC%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7%E4%B9%8BTerrascan/ class=md-nav__link> <span class=md-ellipsis> IaC扫描工具之Terrascan </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/IaC/Terraform/IaC%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%B9%8BTerratest/ class=md-nav__link> <span class=md-ellipsis> IaC测试工具之Terratest </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/IaC/Terraform/terraform-book/ class=md-nav__link> <span class=md-ellipsis> Terraform book </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/IaC/Terraform/Terraform%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> Terraform 相关概念及函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/IaC/Terraform/terraform%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Terraform 最佳实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/other/Argo%20CD/ class=md-nav__link> <span class=md-ellipsis> Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/other/IaC%E4%B9%8BTerraform%20%E4%B8%8EPulumi%E4%BD%BF%E7%94%A8%E5%AF%B9%E6%AF%94/ class=md-nav__link> <span class=md-ellipsis> IaC之Terraform 与Pulumi使用对比 </span> </a> </li> <li class=md-nav__item> <a href=../../../devops/other/Packer/ class=md-nav__link> <span class=md-ellipsis> 镜像定义工具Packer实战 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> 开发技术 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 开发技术 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> 设计模式 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> 设计模式 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_1> <label class=md-nav__link for=__nav_4_1_1 id=__nav_4_1_1_label tabindex=0> <span class=md-ellipsis> 创建型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> 创建型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.简单工厂模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.工厂方法模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 3.抽象工厂模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.建造者(生成器)模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/05-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 5.单例模式 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_2> <label class=md-nav__link for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class=md-ellipsis> 结构型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> 结构型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.装饰器模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.代理模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 3.桥接模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.适配器模式 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3 id=__nav_4_1_3_label tabindex=0> <span class=md-ellipsis> 行为型 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> 行为型 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/01-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 1.策略模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/02-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.观察者模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/03-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E7%89%88%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 2.模版模式 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/04-golang%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 4.职责链模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Golang </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Golang </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_1> <label class=md-nav__link for=__nav_4_2_1 id=__nav_4_2_1_label tabindex=0> <span class=md-ellipsis> Gin </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Gin </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/Golang/gin/gin%20%E6%A1%86%E6%9E%B6%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD/ class=md-nav__link> <span class=md-ellipsis> Gin框架热加载 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/Golang/gin/gin-swagger/ class=md-nav__link> <span class=md-ellipsis> Gin + Swagger快速生成API文档 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/Golang/gin/gin-validator%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/ class=md-nav__link> <span class=md-ellipsis> gin-validator参数校验 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/Golang/gin/gin%E6%A1%86%E6%9E%B6%E4%BC%98%E9%9B%85%E5%85%B3%E6%9C%BA%E9%87%8D%E5%90%AF/ class=md-nav__link> <span class=md-ellipsis> Gin框架优雅关机和重启 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2 id=__nav_4_2_2_label tabindex=0> <span class=md-ellipsis> 开发规范 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> 开发规范 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%80%A7%E8%83%BD01/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之性能01 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8301/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范01 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8302/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范02 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8303/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范03 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E8%A7%84%E8%8C%8304/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之规范04 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9901/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则01 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%BC%8F01/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之编程模式01 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9902/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则02 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9903/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则03 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9904/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则04 </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/%E8%A7%84%E8%8C%83/uber-go%20%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E4%B9%8B%E6%8C%87%E5%AF%BC%E5%8E%9F%E5%88%9905/ class=md-nav__link> <span class=md-ellipsis> Golang编码规范之指导原则05 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3 id=__nav_4_2_3_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../develop/Golang/golang%20%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E6%9C%80%E7%BB%88%E4%B9%8Bjaeger/ class=md-nav__link> <span class=md-ellipsis> Golang 分布式链路追踪之jaeger </span> </a> </li> <li class=md-nav__item> <a href=../../../develop/Golang/golang%20%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/ class=md-nav__link> <span class=md-ellipsis> Go 内存对齐 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1 checked> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> 系统相关 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=true> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> 系统相关 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Linux grub/grub2详解 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Linux grub/grub2详解 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#grub class=md-nav__link> <span class=md-ellipsis> 一 grub是什么 </span> </a> </li> <li class=md-nav__item> <a href=#grub_1 class=md-nav__link> <span class=md-ellipsis> 二 grub基础概念 </span> </a> <nav class=md-nav aria-label="二 grub基础概念"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-gurbgrub2 class=md-nav__link> <span class=md-ellipsis> 2.1 gurb于grub2的区别 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 命名与文件路径 </span> </a> </li> <li class=md-nav__item> <a href=#23-gurb2 class=md-nav__link> <span class=md-ellipsis> 2.3 gurb2引导操作系统方式 </span> </a> </li> <li class=md-nav__item> <a href=#24-boot-loadergurb class=md-nav__link> <span class=md-ellipsis> 2.4 boot loader和gurb关系 </span> </a> </li> <li class=md-nav__item> <a href=#25-grub2 class=md-nav__link> <span class=md-ellipsis> 2.5 grub2的安装位置 </span> </a> </li> <li class=md-nav__item> <a href=#26-grub class=md-nav__link> <span class=md-ellipsis> 2.6 进入grub命令行 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub_2 class=md-nav__link> <span class=md-ellipsis> 三 grub模块 </span> </a> </li> <li class=md-nav__item> <a href=#grub_3 class=md-nav__link> <span class=md-ellipsis> 四 grub救援模式 </span> </a> <nav class=md-nav aria-label="四 grub救援模式"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-grubbios class=md-nav__link> <span class=md-ellipsis> 4.1 grub在BIOS平台启动流程 </span> </a> </li> <li class=md-nav__item> <a href=#42-grub2uefi class=md-nav__link> <span class=md-ellipsis> 4.2 GRUB2在UEFI平台启动流程 </span> </a> </li> <li class=md-nav__item> <a href=#43 class=md-nav__link> <span class=md-ellipsis> 4.3 普通模式 </span> </a> </li> <li class=md-nav__item> <a href=#44 class=md-nav__link> <span class=md-ellipsis> 4.4 救援模式 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2 class=md-nav__link> <span class=md-ellipsis> 五 grub2命名规则 </span> </a> <nav class=md-nav aria-label="五 grub2命名规则"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51 class=md-nav__link> <span class=md-ellipsis> 5.1 设备与分区 </span> </a> </li> <li class=md-nav__item> <a href=#52 class=md-nav__link> <span class=md-ellipsis> 5.2 文件 </span> </a> <nav class=md-nav aria-label="5.2 文件"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#521 class=md-nav__link> <span class=md-ellipsis> 5.2.1 绝对路径 </span> </a> </li> <li class=md-nav__item> <a href=#522 class=md-nav__link> <span class=md-ellipsis> 5.2.2 相对路径 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#53 class=md-nav__link> <span class=md-ellipsis> 5.3 磁盘块 </span> </a> <nav class=md-nav aria-label="5.3 磁盘块"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#531 class=md-nav__link> <span class=md-ellipsis> 5.3.1 绝对路径 </span> </a> </li> <li class=md-nav__item> <a href=#532 class=md-nav__link> <span class=md-ellipsis> 5.3.2 相对路径 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2_1 class=md-nav__link> <span class=md-ellipsis> 六 grub2环境变量 </span> </a> <nav class=md-nav aria-label="六 grub2环境变量"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61 class=md-nav__link> <span class=md-ellipsis> 6.1 从模块角度变量分类 </span> </a> </li> <li class=md-nav__item> <a href=#62 class=md-nav__link> <span class=md-ellipsis> 6.2 特殊变量 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2_2 class=md-nav__link> <span class=md-ellipsis> 七 GRUB2命令 </span> </a> </li> <li class=md-nav__item> <a href=#grub2_3 class=md-nav__link> <span class=md-ellipsis> 八 grub2安全 </span> </a> </li> <li class=md-nav__item> <a href=#gurb2 class=md-nav__link> <span class=md-ellipsis> 九 gurb2实用技巧 </span> </a> <nav class=md-nav aria-label="九 gurb2实用技巧"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#91-grub2 class=md-nav__link> <span class=md-ellipsis> 9.1 为grub2菜单加上背景图 </span> </a> </li> <li class=md-nav__item> <a href=#92-grub2 class=md-nav__link> <span class=md-ellipsis> 9.2 让grub2显示中文界面(包括显示中文菜单项) </span> </a> </li> <li class=md-nav__item> <a href=#93-grub2 class=md-nav__link> <span class=md-ellipsis> 9.3 设置grub2字体 </span> </a> </li> <li class=md-nav__item> <a href=#94-grub2windows-peiso class=md-nav__link> <span class=md-ellipsis> 9.4 使用grub2引导Windows PE的ISO文件 </span> </a> </li> <li class=md-nav__item> <a href=#95-grub2windows-pewim class=md-nav__link> <span class=md-ellipsis> 9.5 使用grub2引导Windows PE的WIM文件 </span> </a> </li> <li class=md-nav__item> <a href=#96-grub2gentoo-livecd-iso class=md-nav__link> <span class=md-ellipsis> 9.6 使用grub2引导(硬盘安装)Gentoo LiveCD 的ISO文件 </span> </a> </li> <li class=md-nav__item> <a href=#97-grub2-linux-livecd-iso class=md-nav__link> <span class=md-ellipsis> 9.7 使用GRUB2引导(硬盘安装)各种 Linux LiveCD 的ISO文件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grubcfg class=md-nav__link> <span class=md-ellipsis> 十 grub.cfg 实例 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 参考链接 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Linux%20%E5%86%85%E6%A0%B8%E5%BC%95%E5%AF%BC%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Linux 内核引导详解 </span> </a> </li> <li class=md-nav__item> <a href=../Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=md-nav__link> <span class=md-ellipsis> Linux 系统安全加固最佳实践 </span> </a> </li> <li class=md-nav__item> <a href=../virtio%E8%AF%A6%E8%A7%A3/ class=md-nav__link> <span class=md-ellipsis> Virtio 详解 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Shell </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../shell/Shell%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> Shell 教程概述 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/1.%E7%AC%AC%E4%B8%80%E4%B8%AAshell%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 1.第一个 Shell 程序 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/2.Shell%E5%8F%98%E9%87%8F/ class=md-nav__link> <span class=md-ellipsis> 2.Shell 变量 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/3.Shell%E5%8F%82%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 3.Shell 参数 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/4.Shell%E6%95%B0%E7%BB%84/ class=md-nav__link> <span class=md-ellipsis> 4.Shell数组 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/5.Shell%E8%BF%90%E7%AE%97%E7%AC%A6/ class=md-nav__link> <span class=md-ellipsis> 5.Shell 运算符 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/6.Shell%20echo%3Aprintf%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 6.Shell echo/printf 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/7.Shell%20test%E5%91%BD%E4%BB%A4/ class=md-nav__link> <span class=md-ellipsis> 7.Shell test 命令 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/8.Shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 8.Shell 流程控制 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/9.Shell%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 8.Shell 函数 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/10.Shell%E8%BE%93%E5%85%A5%3A%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91/ class=md-nav__link> <span class=md-ellipsis> 10.Shell输入/输出重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/11.Shell%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 11.Shell 正则表达式 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/12.Shell%20%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep/ class=md-nav__link> <span class=md-ellipsis> 12.Shell 三剑客之grep </span> </a> </li> <li class=md-nav__item> <a href=../../shell/13.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed/ class=md-nav__link> <span class=md-ellipsis> 13.Shell三剑客之sed </span> </a> </li> <li class=md-nav__item> <a href=../../shell/14.Shell%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk/ class=md-nav__link> <span class=md-ellipsis> 14.Shell三剑客之awk </span> </a> </li> <li class=md-nav__item> <a href=../../shell/15.Shell%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/ class=md-nav__link> <span class=md-ellipsis> 15.Shell常用工具 </span> </a> </li> <li class=md-nav__item> <a href=../../shell/16.Shell%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/ class=md-nav__link> <span class=md-ellipsis> 16.Shell实战项目 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../other/ class=md-nav__link> <span class=md-ellipsis> 工具 </span> </a> </li> <li class=md-nav__item> <a href=../../../other/ class=md-nav__link> <span class=md-ellipsis> 杂记 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#grub class=md-nav__link> <span class=md-ellipsis> 一 grub是什么 </span> </a> </li> <li class=md-nav__item> <a href=#grub_1 class=md-nav__link> <span class=md-ellipsis> 二 grub基础概念 </span> </a> <nav class=md-nav aria-label="二 grub基础概念"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-gurbgrub2 class=md-nav__link> <span class=md-ellipsis> 2.1 gurb于grub2的区别 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 命名与文件路径 </span> </a> </li> <li class=md-nav__item> <a href=#23-gurb2 class=md-nav__link> <span class=md-ellipsis> 2.3 gurb2引导操作系统方式 </span> </a> </li> <li class=md-nav__item> <a href=#24-boot-loadergurb class=md-nav__link> <span class=md-ellipsis> 2.4 boot loader和gurb关系 </span> </a> </li> <li class=md-nav__item> <a href=#25-grub2 class=md-nav__link> <span class=md-ellipsis> 2.5 grub2的安装位置 </span> </a> </li> <li class=md-nav__item> <a href=#26-grub class=md-nav__link> <span class=md-ellipsis> 2.6 进入grub命令行 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub_2 class=md-nav__link> <span class=md-ellipsis> 三 grub模块 </span> </a> </li> <li class=md-nav__item> <a href=#grub_3 class=md-nav__link> <span class=md-ellipsis> 四 grub救援模式 </span> </a> <nav class=md-nav aria-label="四 grub救援模式"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-grubbios class=md-nav__link> <span class=md-ellipsis> 4.1 grub在BIOS平台启动流程 </span> </a> </li> <li class=md-nav__item> <a href=#42-grub2uefi class=md-nav__link> <span class=md-ellipsis> 4.2 GRUB2在UEFI平台启动流程 </span> </a> </li> <li class=md-nav__item> <a href=#43 class=md-nav__link> <span class=md-ellipsis> 4.3 普通模式 </span> </a> </li> <li class=md-nav__item> <a href=#44 class=md-nav__link> <span class=md-ellipsis> 4.4 救援模式 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2 class=md-nav__link> <span class=md-ellipsis> 五 grub2命名规则 </span> </a> <nav class=md-nav aria-label="五 grub2命名规则"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51 class=md-nav__link> <span class=md-ellipsis> 5.1 设备与分区 </span> </a> </li> <li class=md-nav__item> <a href=#52 class=md-nav__link> <span class=md-ellipsis> 5.2 文件 </span> </a> <nav class=md-nav aria-label="5.2 文件"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#521 class=md-nav__link> <span class=md-ellipsis> 5.2.1 绝对路径 </span> </a> </li> <li class=md-nav__item> <a href=#522 class=md-nav__link> <span class=md-ellipsis> 5.2.2 相对路径 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#53 class=md-nav__link> <span class=md-ellipsis> 5.3 磁盘块 </span> </a> <nav class=md-nav aria-label="5.3 磁盘块"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#531 class=md-nav__link> <span class=md-ellipsis> 5.3.1 绝对路径 </span> </a> </li> <li class=md-nav__item> <a href=#532 class=md-nav__link> <span class=md-ellipsis> 5.3.2 相对路径 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2_1 class=md-nav__link> <span class=md-ellipsis> 六 grub2环境变量 </span> </a> <nav class=md-nav aria-label="六 grub2环境变量"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61 class=md-nav__link> <span class=md-ellipsis> 6.1 从模块角度变量分类 </span> </a> </li> <li class=md-nav__item> <a href=#62 class=md-nav__link> <span class=md-ellipsis> 6.2 特殊变量 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grub2_2 class=md-nav__link> <span class=md-ellipsis> 七 GRUB2命令 </span> </a> </li> <li class=md-nav__item> <a href=#grub2_3 class=md-nav__link> <span class=md-ellipsis> 八 grub2安全 </span> </a> </li> <li class=md-nav__item> <a href=#gurb2 class=md-nav__link> <span class=md-ellipsis> 九 gurb2实用技巧 </span> </a> <nav class=md-nav aria-label="九 gurb2实用技巧"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#91-grub2 class=md-nav__link> <span class=md-ellipsis> 9.1 为grub2菜单加上背景图 </span> </a> </li> <li class=md-nav__item> <a href=#92-grub2 class=md-nav__link> <span class=md-ellipsis> 9.2 让grub2显示中文界面(包括显示中文菜单项) </span> </a> </li> <li class=md-nav__item> <a href=#93-grub2 class=md-nav__link> <span class=md-ellipsis> 9.3 设置grub2字体 </span> </a> </li> <li class=md-nav__item> <a href=#94-grub2windows-peiso class=md-nav__link> <span class=md-ellipsis> 9.4 使用grub2引导Windows PE的ISO文件 </span> </a> </li> <li class=md-nav__item> <a href=#95-grub2windows-pewim class=md-nav__link> <span class=md-ellipsis> 9.5 使用grub2引导Windows PE的WIM文件 </span> </a> </li> <li class=md-nav__item> <a href=#96-grub2gentoo-livecd-iso class=md-nav__link> <span class=md-ellipsis> 9.6 使用grub2引导(硬盘安装)Gentoo LiveCD 的ISO文件 </span> </a> </li> <li class=md-nav__item> <a href=#97-grub2-linux-livecd-iso class=md-nav__link> <span class=md-ellipsis> 9.7 使用GRUB2引导(硬盘安装)各种 Linux LiveCD 的ISO文件 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grubcfg class=md-nav__link> <span class=md-ellipsis> 十 grub.cfg 实例 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 参考链接 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=linux-grubgrub2>Linux grub/grub2详解<a class=headerlink href=#linux-grubgrub2 title="Permanent link">&para;</a></h1> <h2 id=grub>一 grub是什么<a class=headerlink href=#grub title="Permanent link">&para;</a></h2> <p>GRUB（GRand Unified Bootloader）指的是多系统引导管理器，它可以在多个<a href=https://baike.baidu.com/item/操作系统>操作系统</a>共存时选择引导某个系统。</p> <h2 id=grub_1>二 grub基础概念<a class=headerlink href=#grub_1 title="Permanent link">&para;</a></h2> <h3 id=21-gurbgrub2>2.1 gurb于grub2的区别<a class=headerlink href=#21-gurbgrub2 title="Permanent link">&para;</a></h3> <ul> <li>配置文件名称改变：gurb中为grub.conf或menu.lst(grub.conf的一个软连接)，gurb2中为grub.cfg</li> <li>grub2中新增语法更接近脚本语言，例如变量/条件判断/循环。</li> <li>grub中从0开始，gurb2中设备分区从1开始。</li> <li>grub2支持图形界面配置，但需要安装epel提供的grub-customizer包</li> <li>以进入操作系统环境，不再提供grub命令，在gurb2中没有find命令支持。</li> <li>grub2能够直接从lvm或raid磁盘读取文件目录</li> </ul> <h3 id=22>2.2 命名与文件路径<a class=headerlink href=#22 title="Permanent link">&para;</a></h3> <ul> <li>(fd0) 第一块软盘</li> <li>(hd0,msdos2):第一块硬盘的第二个mbr分区，grub2中分区从1开始，传统grub分区从0开始</li> <li>(hd0,msdos5):第一块硬盘的第一个逻辑分区</li> <li>(hd0,gpt1)：第一块硬盘的gpt分区</li> <li>/boot/vmlinux：相对路径，表示根目录下的boot目录下的vmlinux</li> <li>(hd0,msdos1)/boot/vmlinux：绝对路径，第一块硬盘的第一个分区的boot目录下的vmlinux文件</li> </ul> <h3 id=23-gurb2>2.3 gurb2引导操作系统方式<a class=headerlink href=#23-gurb2 title="Permanent link">&para;</a></h3> <ul> <li>直接引导(direct-load)：直接使用默认grub2 boot loader来引导默认配置文件中操作系统</li> <li>链式引导(chain-load)：使用默认grub2 boot loader链式引导另一个boot loader，改boot loader将引导对应操作系统</li> </ul> <p>一般使用第一种直接引导，只有引导gurb默认不支持的操作系统使用第二种</p> <h3 id=24-boot-loadergurb>2.4 boot loader和gurb关系<a class=headerlink href=#24-boot-loadergurb title="Permanent link">&para;</a></h3> <p>使用gurb来管理启动菜单时，boot loader都是grub程序安装的。</p> <ul> <li> <p>传统gurb将stage1转换后的内容安装到MBR(VBR或EBR)中的boot loader中，将stage1_5转换后的内容安装在紧跟在MBR后的扇区中，将stage2转换后的内容安装在/boot分区中</p> </li> <li> <p>gurb2将boot.img转换后的内容安装到MBR(VBR或EBR)中的boot loader部分，将diskboot.img和kernel.img结合成为core.img，同时还回嵌入一些模块或加载模块的代码到core.img中，然后将core.img转换后的内容安装到磁盘的指定位置处。</p> </li> </ul> <h3 id=25-grub2>2.5 grub2的安装位置<a class=headerlink href=#25-grub2 title="Permanent link">&para;</a></h3> <p>core.img的安装位置因为boot.img位置是固定在MBR或VBR或EBR上</p> <ul> <li>MBR格式分区表用于PC BIOS平台，这种格式允许四个主分区和额外逻辑分区，使用此种格式分区表，两种方式安装grub</li> <li>嵌入到mbr和第一个分区中级的空间，这部分就是大众所说的"boot track"，"MBR gap"或"embedding area"，它们大致需要31kB空间,使用嵌入方式安装grub，没有保留的空间来保证安全性，例如有些专门软件就是使用这段空间实现许可限制；另外分区的时候，虽软回在mbr和第一个分区中间留下空闲空间，但可能留下的空间比这个更小。</li> <li>将core.img安装到某个文件系统中，然后使用分区中第一个扇区(严格来说不是第一个扇区，而是第一个block)存储启动它的代码。这种方式安装grub很脆弱，例如文件系统某些特性需要做成尾部包装，甚至某些fsck检测，它们可能移动这些block。</li> </ul> <p>GRUB开发团队建议将grub嵌入到mbr和第一个分区之间，除非有特殊需求，但任需要保证第一个分区至少从第31kB（第63个扇区）</p> <p>之后开始创建，现在的磁盘设备，一般都会有嗯去辩解对齐的性能优化提醒，所有第一个分区可能自动从第1MB处开始创建</p> <ul> <li>GPT</li> </ul> <h3 id=26-grub>2.6 进入grub命令行<a class=headerlink href=#26-grub title="Permanent link">&para;</a></h3> <p>传统grub上，可以直接bash敲入grub命令进入命令交互模式，但在grub2只能在系统启动前进入grub交互命令行</p> <p>按e可以编辑所选菜单对应grub菜单配置项，按c可以进入grub命令行交互模式</p> <p>修改完毕后可以按ctl+x启动系统，</p> <h2 id=grub_2>三 grub模块<a class=headerlink href=#grub_2 title="Permanent link">&para;</a></h2> <p>对于GRUB-2.0.2版本来说，官方提供的模块一共有200多个，这些模块大致可以分为以下几类(模块间的依赖关系位于"moddep.lst"文件中)：</p> <p><img alt src=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20210920091617.png></p> <ul> <li>命令模块[command.lst]</li> </ul> <p>提供了各种不同的功能，类似标准Unix命令，一共将近100个。例如：cat cpuid echo halt lspci chainloader initrd linux password ...</p> <ul> <li>加密模块[crypto.lst]</li> </ul> <p>提供了各种数据完整性校验与密码算法支持，一共20多个。例如：gcry_rijndael crc64 gcry_md5 ...</p> <ul> <li>文件系统模块[fs.lst]</li> </ul> <p>提供了访问各种文件系统的功能，一共30多个。例如：btrfs cpio exfat ext2 fat iso9660 ntfs tar xfs zfs ...</p> <ul> <li>分区模块[partmap.lst]</li> </ul> <p>提供了识别各种分区格式的功能，一共10多个。例如：part_bsd part_gpt part_msdos ...</p> <ul> <li>分区工具[parttool.lst]</li> </ul> <p>提供了操作各种分区格式的功能，目前只有 msdospart 这一个。</p> <ul> <li>终端模块[terminal.lst]</li> </ul> <p>提供了各种不同终端的支持，一共不到10个。例如：serial gfxterm vga_text at_keyboard ...</p> <ul> <li>视频模块[video.lst]</li> </ul> <p>提供了各种不同的视频模式支持，一共6个。例如：vga vbe efi_gop efi_uga ...</p> <ul> <li>其他模块</li> </ul> <p>所有未在上述分类文件中列出的模块都归为这一类，一共将近100个。值得关注的有以下几个：</p> <p>a. "all_video"可用于一次性加载当前所有可用的视频模块；</p> <p>b. "gfxmenu"可用于提供主题支持；</p> <p>c. "jpeg png tga"可用于提供特定格式的背景图片支持；</p> <p>d. "xzio gzio lzopio"可用于提供特定压缩格式支持(常配合"initrd"命令使用)；</p> <h2 id=grub_3>四 grub救援模式<a class=headerlink href=#grub_3 title="Permanent link">&para;</a></h2> <h3 id=41-grubbios>4.1 grub在BIOS平台启动流程<a class=headerlink href=#41-grubbios title="Permanent link">&para;</a></h3> <p>GRUB2在BIOS平台上的常规启动步骤是这样的：BIOS &rarr; boot.img[MBR] &rarr; core.img[MBR gap/embedding area/BIOS Boot Partition] &rarr; 设置"prefix root cmdpath"环境变量 &rarr; 加载"normal.mod"模块[同时还包括它所依赖的 terminal crypto extcmd boot gettext 模块] &rarr; 执行"normal $prefix/grub.cfg"命令</p> <h3 id=42-grub2uefi>4.2 GRUB2在UEFI平台启动流程<a class=headerlink href=#42-grub2uefi title="Permanent link">&para;</a></h3> <p>GRUB2在UEFI平台上的常规启动步骤是这样的：UEFI &rarr; core.img[BOOTX64.EFI/BOOTX86.EFI] &rarr; 设置"prefix root cmdpath"环境变量 &rarr; 加载"normal.mod"模块[同时还包括它所依赖的 terminal crypto extcmd boot gettext 模块] &rarr; 执行"normal $prefix/grub.cfg"命令</p> <h3 id=43>4.3 普通模式<a class=headerlink href=#43 title="Permanent link">&para;</a></h3> <p>如果上述步骤全部成功，那么你将进入'普通模式'，一般是显示一个菜单(找到了'$prefix/grub.cfg')，或者直接进入GRUB SHELL(没找到'$prefix/grub.cfg')。在普通模式中，命令模块[command.lst]与加密模块[crypto.lst]会被自动按需载入(无需使用"insmod"命令)，并且可使用完整的GRUB脚本功能。但是其他模块则可能需要明确使用"insmod"命令来载入。</p> <h3 id=44>4.4 救援模式<a class=headerlink href=#44 title="Permanent link">&para;</a></h3> <p>如果在加载"normal.mod"模块这一步出现故障，那么你将进入GRUB2的'救援模式'，而不是常规的'普通模式'。在救援模式中，GRUB只自动设置了"cmdpath prefix root"三个环境变量，并且只能使用"insmod ls set unset"四个命令。只有当额外的模块被加载之后，才可以使用一些其它的命令,变量,解析器,驱动程序。通常来说，进入救援模式可能意味着你的GRUB2没有正确安装。请认真阅读'grub-install --help'的输出选项，并使用正确的选项重新安装。更多细节请参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/GRUB-only-offers-a-rescue-shell.html>GRUB only offers a rescue shell</a>"部分。</p> <h2 id=grub2>五 grub2命名规则<a class=headerlink href=#grub2 title="Permanent link">&para;</a></h2> <h3 id=51>5.1 设备与分区<a class=headerlink href=#51 title="Permanent link">&para;</a></h3> <p>GRUB2对设备与分区的命名规则举例如下，看看就能明白。需要说明的是磁盘从"0"开始计数，分区从"1"开始计数。</p> <p>GRUB2对设备与分区的命名规则举例如下，看看就能明白。需要说明的是磁盘从"0"开始计数，分区从"1"开始计数。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>(fd0)          第一软盘
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>(hd0)          第一硬盘[大多数U盘与USB接口的移动硬盘以及SD卡也都被当作硬盘看待]
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>(hd1,1)        第二硬盘的第一分区(通用于MBR与GPT分区)
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>(hd0,msdos2)   第一硬盘的第二MBR分区，也就是传统的DOS分区表
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>(hd1,msdos5)   第二硬盘的第五MBR分区，也就是第一个逻辑分区
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>(hd0,gpt1)     第一硬盘的第一GPT分区
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>(cd)           启动光盘[仅在从光盘启动GRUB时可用]
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>(cd0)          第一光盘
</code></pre></div> <p>上面所举的例子仅是最常用的情形，更多高级的设备命名规则请参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Naming-convention.html>Naming convention</a>"与"<a href=http://www.gnu.org/software/grub/manual/html_node/Device-syntax.html>How to specify devices</a>"部分。此外，如果你想看看当前系统上有哪些设备可用，可以在GRUB SHELL中使用"ls"命令(可能需要先加载必要的驱动模块)。</p> <h3 id=52>5.2 文件<a class=headerlink href=#52 title="Permanent link">&para;</a></h3> <p>文件的命名方法有两种：(1)绝对路径表示法，(2)相对路径表示法。</p> <h4 id=521>5.2.1 绝对路径<a class=headerlink href=#521 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=o>(</span>fd0<span class=o>)</span>/grldr<span class=w>                 </span>第一软盘根目录下的<span class=s2>&quot;grldr&quot;</span>文件<span class=o>[</span>绝对路径<span class=o>]</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=o>(</span>hd0,gpt1<span class=o>)</span>/boot/vmlinuz<span class=w>     </span>第一硬盘的第一GPT分区<span class=s2>&quot;boot&quot;</span>目录下的<span class=s2>&quot;vmlinuz&quot;</span>文件<span class=o>[</span>绝对路径<span class=o>]</span>
</code></pre></div> <h4 id=522>5.2.2 相对路径<a class=headerlink href=#522 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>/boot/vmlinuz<span class=w>               </span>根设备<span class=s2>&quot;boot&quot;</span>目录下的<span class=s2>&quot;vmlinuz&quot;</span>文件<span class=o>[</span>相对路径<span class=o>]</span>，
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>                            </span>当<span class=s2>&quot;root&quot;</span>环境变量等于<span class=s2>&quot;(hd0,gpt1)&quot;</span>时，等价于<span class=s2>&quot;(hd0,gpt1)/boot/vmlinuz&quot;</span>
</code></pre></div> <p>上面所举的例子仅是最常用的情形，更多高级的文件命名规则请参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/File-name-syntax.html>How to specify files</a>"部分。</p> <h3 id=53>5.3 磁盘块<a class=headerlink href=#53 title="Permanent link">&para;</a></h3> <p>磁盘块的命名方法同样也有两种：(1)绝对路径表示法，(2)相对路径表示法</p> <h4 id=531>5.3.1 绝对路径<a class=headerlink href=#531 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=o>(</span>hd1,1<span class=o>)</span><span class=m>0</span>+1<span class=w>  </span>在第二硬盘的第一分区上，从第<span class=s2>&quot;0&quot;</span>个磁盘块<span class=o>(</span>首扇区<span class=o>)</span>起，长度为<span class=s2>&quot;1&quot;</span>的连续块。<span class=o>[</span>绝对路径<span class=o>]</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=o>(</span>hd1,1<span class=o>)</span>+1<span class=w>   </span>含义与上一个相同，因为当从第<span class=s2>&quot;0&quot;</span>个磁盘块<span class=o>(</span>首扇区<span class=o>)</span>起时，<span class=s2>&quot;0&quot;</span>可以省略不写。<span class=o>[</span>绝对路径<span class=o>]</span>
</code></pre></div> <h4 id=532>5.3.2 相对路径<a class=headerlink href=#532 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>+1<span class=w>          </span>在根设备上，从第<span class=s2>&quot;0&quot;</span>个磁盘块<span class=o>(</span>首扇区<span class=o>)</span>起，长度为<span class=s2>&quot;1&quot;</span>的连续块。<span class=o>[</span>相对路径<span class=o>]</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>            </span>当<span class=s2>&quot;root&quot;</span>环境变量等于<span class=s2>&quot;(hd1,1)&quot;</span>时，等价于<span class=s2>&quot;(hd1,1)0+1&quot;</span>
</code></pre></div> <p>磁盘块几乎只用于链式引导(chainloader)的场合。更多高级的磁盘块命名规则请参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Block-list-syntax.html>How to specify block lists</a>"部分。</p> <h2 id=grub2_1>六 grub2环境变量<a class=headerlink href=#grub2_1 title="Permanent link">&para;</a></h2> <p>GRUB2的环境变量大致可以分为两类:</p> <p>第一类是自动设置的变量，也就是这些变量的初始值由GRUB2自动设置，其值必定存在且不为空。</p> <p>第二类是手动设置的变量，它们没有初始值(或者初始值为空)，需要经过手动明确设置之后才能使用。</p> <h3 id=61>6.1 从模块角度变量分类<a class=headerlink href=#61 title="Permanent link">&para;</a></h3> <p>大多数有特定含义的环境变量都是附属于特定附加模块的，只有加载了这些模块之后，这些环境变量才变得有意义。所以从模块的角度看，GRUB2的环境变量又可以分为三类：</p> <p>(1)核心变量，GRUB2核心提供的变量，不依赖于任何可加载模块，这样的变量只有"cmdpath prefix root"三个，而且它们的初始值都由GRUB2自动设置。</p> <p>(2)模块变量，绝大多数有特定含义的环境变量都属此类。</p> <p>(3)脚本变量，这是为了方便编写grub.cfg脚本而设置的变量，没有特殊含义，也不依赖于特定模块，与一般的bash脚本中的变量类似。</p> <p>有关GRUB2脚本的完整说明可以参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Shell_002dlike-scripting.html>Writing full configuration files directly</a>"部分，基本上其语法与bash脚本完全一致，上手非常容易。</p> <h3 id=62>6.2 特殊变量<a class=headerlink href=#62 title="Permanent link">&para;</a></h3> <p>下面列出的变量都是有特定含义的变量，这里只列出常用的一些变量，完整的列表可以参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Special-environment-variables.html>Special environment variables</a>"部分。</p> <ul> <li>?：上一条命令的返回值，零表示成功，非零表示失败[与bash一样]。由GRUB2自动设置。你只能使用此变量，而不能修改它。</li> <li>check_signatures：是否在加载文件时强制验证签名，可以设为'enforce'或'no'</li> <li>chosen：当前被执行的菜单项名称(紧跟"menuentry"命令之后的字符串或者'--id'选项的参数)，例如'Windows 7'。由GRUB2自动设置。你只应该使用此变量，而不应该修改它。</li> <li>cmdpath：当前被加载的"core.img"所在目录(绝对路径)。例如：UEFI启动可能是'(hd0,gpt1)/EFI/UBUNTU'或'(cd0)/EFI/BOOT'，BIOS启动可能是'(hd0)'。由GRUB2自动设置。你只应该使用此变量，而不应该修改它。</li> <li>debug：设为'all'时表示开启调试输出[会显示大量信息,谨慎开启]</li> <li>default：默认选中第几个菜单项(从'0'开始计数)</li> <li>fallback：如果默认菜单项启动失败，那么就启动第几个菜单项(从'0'开始计数)</li> <li>gfxmode：设置"gfxterm"模块所使用的视频模式，可以指定一组由逗号或分号分隔的模式以供逐一尝试：每个模式的格式必须是：'auto'(自动检测),'宽x高','宽x高x色深'之一，并且只能使用VBE标准指定的模式[640x480,800x600,1024x768,1280x1024]x[16,24,32]。可以在GRUB SHELL中使用"videoinfo"命令列出当前所有可用模式。默认值是'auto'。</li> <li>gfxpayload: 设置Linux内核启动时的视频模式，可以指定一组由逗号或分号分隔的模式以供逐一尝试：每个模式的格式必须是：'text'(普通文本模式,不能用于UEFI平台),'keep'(继承"gfxmode"的值),'auto'(自动检测),'宽x高','宽x高x色深'之一，并且只能使用VBE标准指定的模式[640x480,800x600,1024x768,1280x1024]x[16,24,32]。在BIOS平台上的默认值是'text'，在UEFI平台上的默认值是'auto'。除非你想明确设置Linux控制台的分辨率(要求内核必须"CONFIG_FRAMEBUFFER_CONSOLE=y")，或者打算在BIOS平台上使用图形控制台(要求内核必须"CONFIG_FRAMEBUFFER_CONSOLE=y")，否则不要设置此变量。</li> <li>gfxterm_font：设置"gfxterm"模块所使用的字体，默认使用所有可用字体</li> <li>grub_cpu：此GRUB所适用的CPU类型。例如：'i386', 'x86_64'。由GRUB2自动设置。你只应该使用此变量，而不应该修改它。</li> <li>grub_platform：此GRUB所适用的平台类型。例如：'pc', 'efi'。由GRUB2自动设置。你只应该使用此变量，而不应该修改它。</li> <li>lang：设置GRUB2的界面语言，必须搭配"locale_dir"变量一起使用。简体中文应设为'zh_CN'。</li> <li>locale_dir：设置翻译文件(*.mo)的目录，通常是'$prefix/locale'，若未明确设置此目录，则禁止国际化。</li> <li> <p>pager：如果设为'1'，那么每一满屏后暂停输出，等待键盘输入。缺省是' '，表示不暂停。</p> </li> <li> <p>prefix：绝对路径形式的'/boot/grub'目录位置(也就是GRUB2的安装目录)，例如'(hd0,gpt1)/grub'或'(hd0,msdos2)/boot/grub'。初始值由GRUB在启动时根据"grub-install"在安装时提供的信息自动设置。你只应该使用此变量，而不应该修改它。</p> </li> <li>root：设置"根设备"。任何未指定设备名的文件都视为位于此设备。初始值由GRUB在启动时根据"prefix"变量的值自动设置。在大多数情况下，你都需要修改它。</li> <li> <p>superusers：设置一组"超级用户"(使用空格/逗号/分号进行分隔)，以开启安全认证的功能。</p> </li> <li> <p>theme：设置菜单界面的主题风格文件的位置，</p> </li> </ul> <p>例如："/boot/grub/themes/starfield/theme.txt"。关于如何定制界面风格(背景图片/字体/颜色/图标等)的细节，可以参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Theme-file-format.html>Theme file format</a>"部分。</p> <ul> <li>timeout：在启动默认菜单项前，等待键盘输入的秒数。默认值是'5'秒。'0'表示直接启动默认菜单项(不显示菜单)，'-1'表示永远等待。</li> </ul> <h2 id=grub2_2>七 GRUB2命令<a class=headerlink href=#grub2_2 title="Permanent link">&para;</a></h2> <p>对于GRUB-2.0.2版本来说，所有可用的命令有大约200个之多，他们中的绝大多数由各种各样的模块提供。我们没有必要去了解所有这些200个命令，只需要了解一些常用的命令即可(实际上就连官方文档也没有给出全部的命令说明)。更多的命令说明可以参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Commands.html>The list of available commands</a>"页面中列出的几个二级页面。</p> <ul> <li><strong>menuentry "title" [--class=class …] [--users=users] [--unrestricted] [--hotkey=key] [--id=id] [arg …] { command; … }</strong></li> </ul> <p>定义一个名为"title"的菜单项。当此菜单项被选中时，GRUB将会把环境变量"chosen"的值设为"id"(使用了[--id=id]选项)或"title"(未使用[--id=id]选项)，然后执行花括号中的命令列表，如果列表中最后一个命令执行成功，并且已经载入了一个内核，那么将执行"boot"命令。</p> <p>可以使用 --class 选项指定菜单项所属的"样式类"。从而可以使用指定的主题样式显示菜单项。</p> <p>可以使用 --users 选项指定只允许特定的用户访问此菜单项。如果没有使用此选项，则表示允许所有用户访问。</p> <p>可以使用 --unrestricted 选项指明允许所有用户访问此菜单项。</p> <p>可以使用 --hotkey 选项设置访问此菜单项的热键(快捷键)。"key"可以是一个单独的字母，或者'backspace','tab','delete'之一。</p> <p>可以使用 --id 选项为此菜单项设置一个全局唯一的标识符。"id"必须由ASCII字母/数字/下划线组成，且不得以数字开头。</p> <p>[arg …]是可选的参数列表。你可以把它们理解为命令行参数。实际上"title"也是命令行参数，只不过这个参数是个必须参数而已。这些参数都可以在花括号内的命令列表中使用，"title"对应着"$1"，其余的以此类推。</p> <ul> <li><strong>terminal_input [--append|--remove] [terminal1] [terminal2] …</strong></li> </ul> <p>如果不带任何选项与参数，则表示列出当前激活的输入终端，以及所有其他可用的输入终端。</p> <p>可以使用 --append 选项将指定的终端加入到激活的输入终端列表中，所有列表中的终端都可以用于向GRUB提供输入。</p> <p>可以使用 --remove 选项将指定的终端从激活的输入终端列表中删除。</p> <p>如果不使用任何选项，但是指定了一个或多个终端参数，则表示将当前激活的输入终端设置为参数指定的终端。</p> <ul> <li><strong>terminal_output [--append|--remove] [terminal1] [terminal2] …</strong></li> </ul> <p>如果不带任何选项与参数，则表示列出当前激活的输出终端，以及所有其他可用的输出终端。</p> <p>可以使用 --append 选项将指定的终端加入到激活的输出终端列表中，所有列表中的终端都将接受到GRUB的输出。</p> <p>可以使用 --remove 选项将指定的终端从激活的输出终端列表中删除。</p> <p>如果不使用任何选项，但是指定了一个或多个终端参数，则表示将当前激活的输出终端设置为参数指定的终端。</p> <ul> <li><strong>authenticate [userlist]</strong></li> </ul> <p>检查当前用户是否位于"userlist"或环境变量"superusers"中。[注意]如果环境变量"superusers"的值为空，此命令将返回'真'。</p> <ul> <li><strong>background_color color</strong></li> </ul> <p>设置当前激活的输出终端的背景颜色。"color"可以使用HTML风格的颜色表示法("#RRGGBB"或"#RGB")。</p> <p>[注意]仅在使用'gfxterm'作为输出终端的时候，才能改变背景色。</p> <ul> <li><strong>background_image [[--mode 'stretch'|'normal'] file]</strong></li> </ul> <p>将当前激活的输出终端的背景图片设置为"file"文件。除非使用了"--mode 'normal'"选项，否则图片将被自动缩放以填满整个屏幕。</p> <p>如果不带任何选项与参数，则表示删除背景图片。</p> <p>[注意]仅在使用'gfxterm'作为输出终端的时候，才能改变背景图片。</p> <ul> <li><strong>boot</strong></li> </ul> <p>启动已经被载入的OS或链式加载器。仅在运行于交互式命令行的时候才是需要的。在一个菜单项结束时是隐含的。</p> <ul> <li><strong>cat [--dos] file</strong></li> </ul> <p>显示文件"file"的内容。如果使用了"--dos"选项，那么"回车/换行符"将被显示为一个简单的换行符。否则，回车符将被显示为一个控制符(<d>)。</p> <ul> <li><strong>chainloader [--force] file</strong></li> </ul> <p>链式加载"file"文件。通常使用磁盘块表示法，例如用'+1'表示当前根分区的第一个扇区。</p> <p>可以使用 --force 选项强制载入文件，而不管它是否有正确的签名。通常用于加载有缺陷的启动载入器(例如 SCO UnixWare 7.1)。</p> <ul> <li><strong>configfile file</strong></li> </ul> <p>将"file"作为配置文件加载。如果"file"中定义了菜单项，那么立即显示一个包含它们的菜单。</p> <p>[注意]"file"文件对环境变量所做的任何变更都将在从此文件返回后失效。</p> <ul> <li><strong>cpuid [-l]</strong></li> </ul> <p>检查CPU特性。仅在x86系统上可用。</p> <p>如果使用了 -l 选项，那么如果CPU是64位则返回真，否则返回假。</p> <ul> <li><strong>drivemap -l|-r|[-s] from_drive to_drive</strong></li> </ul> <p>如果不使用任何选项，表示将"from_drive"映射到"to_drive"。这主要用于链式加载Windows之类的操作系统，因为它们只能从第一个硬盘启动。出于方便的原因，分区后缀将被忽略，因此你可用安全地将"${root}"作为磁盘使用。</p> <p>可以使用 -s 选项，执行反向映射，也就是交换这两个磁盘。例如： drivemap -s (hd0) (hd1)</p> <p>可以使用 -l 选项，列出当前已有的映射。</p> <p>可以使用 -r 选项，把映射重置为默认值，也就是撤销所有当前已有的映射。</p> <ul> <li><strong>echo [-n] [-e] string …</strong></li> </ul> <p>显示所要求的文本并换行(除非使用了 -n 选项)。如果有多个字符串，依次输出它们，并用空格分隔每一个。</p> <p>和bash的习惯一样，可以在双引号内使用"${var}"来引用变量的值，也可以使用 -e 选项激活对反斜杠转义符的解释( \ \a \r \n \t ...)。</p> <ul> <li><strong>export envvar</strong></li> </ul> <p>导出环境变量"envvar"，以使其对于使用"configfile"命令载入的配置文件可见。</p> <ul> <li><strong>false</strong></li> </ul> <p>不做任何事，只返回一个失败的结果。主要用在if/while之类的控制构造中。</p> <ul> <li><strong>gettext string</strong></li> </ul> <p>把"string"翻译为环境变量"lang"指定的语言。MO格式的翻译文件从环境变量"locale_dir"指定的目录加载。</p> <ul> <li><strong>halt [--no-apm]</strong></li> </ul> <p>关闭计算机。如果指定了 --no-apm 选项，表示不执行APM BIOS调用。否则，计算机使用APM关闭。</p> <ul> <li><strong>help [pattern …]</strong></li> </ul> <p>显示内建命令的帮助信息。如果没有指定"pattern"，那么将显示所有可用命令的简短描述。</p> <p>如果指定了"pattern"，那么将只显示名字以这些"pattern"开头的命令的详细帮助信息。</p> <ul> <li><strong>initrd file</strong></li> </ul> <p>为以32位协议启动的Linux内核载入一个"initial ramdisk"，并在内存里的Linux设置区域设置合适的参数。</p> <p>[注意]这个命令必须放在"linux"命令之后使用。</p> <ul> <li><strong>initrd16 file</strong></li> </ul> <p>为以16位协议启动的Linux内核载入一个"initial ramdisk"，并在内存里的Linux设置区域设置合适的参数。</p> <p>[注意]这个命令必须放在"linux16"命令之后使用。</p> <ul> <li><strong>insmod module</strong></li> </ul> <p>载入名为"module"的GRUB2模块。</p> <ul> <li><strong>linux file …</strong></li> </ul> <p>使用32位启动协议从"file"载入一个Linux内核映像，并将其余的字符作为内核的命令行参数逐字传入。</p> <p>[注意]使用32位启动协议意味着'vga='启动选项将会失效。如果你希望明确设置一个特定的视频模式，那么应该使用"gfxpayload"环境变量。虽然GRUB可以自动地检测某些'vga='参数，并把它们翻译为合适的"gfxpayload"设置，但是并不建议这样做。</p> <ul> <li><strong>linux16 file …</strong></li> </ul> <p>以传统的16位启动协议从"file"载入一个Linux内核映像，并将其余的字符作为内核的命令行参数逐字传入。这通常用于启动一些遵守Linux启动协议的特殊工具(例如<a href=http://www.syslinux.org/wiki/index.php/MEMDISK>MEMDISK</a>)。</p> <p>[注意]使用传统的16位启动协议意味着：(1)'vga='启动选项依然有效，(2)不能启动纯64位内核(也就是内核必须要'CONFIG_IA32_EMULATION=y'才行)。</p> <ul> <li><strong>loadfont file …</strong></li> </ul> <p>从指定的"file"加载字体，除非使用了绝对路径，否则"file"将被视为"$prefix/fonts/file.pf2"文件。</p> <ul> <li><strong>loopback [-d] device file</strong></li> </ul> <p>将"file"文件映射为"device"回环设备。例如：</p> <p>loopback loop0 /path/to/image ls (loop0)/</p> <p>可以使用 -d 选项，删除先前使用这个命令创建的设备。</p> <ul> <li><strong>ls [arg …]</strong></li> </ul> <p>如果不使用参数，那么列出所有对GRUB已知的设备。</p> <p>如果参数是包含在括号内的一个设备名，那么列出该设备根目录下的所有文件。</p> <p>如果参数是以绝对路径给出的目录，那么列出这个目录的内容。</p> <ul> <li><strong>lsfonts</strong></li> </ul> <p>列出已经加载的所有字体</p> <ul> <li><strong>lsmod</strong></li> </ul> <p>列出已经加载的所有模块</p> <ul> <li><strong>normal [file]</strong></li> </ul> <p>进入普通模式，并显示GRUB菜单。[说明]只要当前没有处于救援模式，其实就已经是在普通模式中了，所以通常并不需要明确使用此命令。</p> <p>在普通模式中，命令模块[command.lst]与加密模块[crypto.lst]会被自动按需载入(无需使用"insmod"命令)，并且可使用完整的GRUB脚本功能。但是其他模块则可能需要明确使用"insmod"命令来载入。</p> <p>如果给出了"file"参数，那么将从这个文件中读入命令(也就是作为"grub.cfg"的替代)，否则将从"$prefix/grub.cfg"中读入命令(如果存在的话)。你也可以理解为"file"的默认值是'$prefix/grub.cfg'。</p> <p>可以在普通模式中嵌套调用此命令，以构建一个嵌套的环境。不过一般不这么做，而是使用"configfile"命令来达到这目的。</p> <ul> <li><strong>normal_exit</strong></li> </ul> <p>退出当前的普通模式。如果这个普通模式实例不是嵌套在另一个普通模式里的话，就会返回到救援模式。</p> <ul> <li><strong>parttool partition commands</strong></li> </ul> <p>对分区表进行各种修改。目前只能作用于MBR分区表(DOS分区表)，而不能用于GPT分区表。目前仅支持以下三种用法：</p> <p>(1)设置或去掉分区的激活标记(仅对Windows系统有意义)。 例如："parttool (hd0,msdos2) +boot"表示为(hd0,msdos2)分区加上激活标记，而"parttool (hd0,msdos2) -boot"则表示去掉(hd0,msdos2)分区的激活标记。</p> <p>(2)设置或去掉分区的隐藏标记(仅对Windows系统有意义)。 例如："parttool (hd0,msdos2) +hidden"表示为(hd0,msdos2)分区加上隐藏标记，而"parttool (hd0,msdos2) -hidden"则表示去掉(hd0,msdos2)分区的隐藏标记。</p> <p>(3)更改分区的类型。其值必须是0x00-0xFF范围内的值。且应该使用'0xNN'格式的十六进制数。 例如："parttool (hd0,msdos2) type=0x83"表示将(hd0,msdos2)分区类型修改为'0x83'(Linux分区)。</p> <ul> <li><strong>password user clear-password</strong></li> </ul> <p>定义一个名为user的用户，并使用明文口令'clear-password'。不建议使用此命令。</p> <ul> <li><strong>password_pbkdf2 user hashed-password</strong></li> </ul> <p>定义一个名为user的用户，并使用哈希口令'hashed-password'(通过"grub-mkpasswd-pbkdf2"工具生成)。这是建议使用的命令，因为它安全性更高。</p> <ul> <li><strong>probe [--set var] --driver|--partmap|--fs|--fs-uuid|--label device</strong></li> </ul> <p>提取"device"设备的特定信息。如果使用了 --set 选项，则表示将提取的结果保存在"var"变量中，否则将提取的结果直接显示出来。</p> <ul> <li><strong>read [var]</strong></li> </ul> <p>从用户读取一行输入。如果给定环境变量"var"，则把它设为所读取的行(不包括结尾的换行符)。</p> <ul> <li><strong>reboot</strong></li> </ul> <p>重新启动</p> <ul> <li><strong>rmmod module</strong></li> </ul> <p>卸载"module"模块</p> <ul> <li><strong>search [--file|--label|--fs-uuid] [--set [var]] [--no-floppy] name</strong></li> </ul> <p>通过文件[--file]、卷标[--label]、文件系统UUID[--fs-uuid]来查找设备。</p> <p>如果使用了 --set 选项，那么会将第一个找到的设备设置为环境变量"var"的值。默认的"var"是'root'。</p> <p>可以使用 --no-floppy 选项来禁止查找软盘设备，因为这些设备非常慢。</p> <ul> <li><strong>set [envvar=value]</strong></li> </ul> <p>将环境变量"envvar"的值设为'value'。如果没有使用参数，则打印出所有环境变量及其值。</p> <ul> <li><strong>source file</strong></li> </ul> <p>直接将"file"文件的内容插入到当前位置。与"configfile"不同，此命令既不切换执行环境，也不会显示一个新的菜单。</p> <ul> <li><strong>test expression [ expression ]</strong></li> </ul> <p>计算"expression"的值，并在结果为真时返回零值，或者在结果为假时返回非零值，主要用在if/while之类的控制构造中。</p> <p>可用的"expression"模式如下(与bash类似)：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nv>string1</span><span class=w> </span><span class=o>==</span><span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1与string2完全相同<span class=o>]</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>string1<span class=w> </span>!<span class=o>=</span><span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1与string2不完全相同<span class=o>]</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>string1<span class=w> </span>&lt;<span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1在字母顺序上小于string2<span class=o>]</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>string1<span class=w> </span>&lt;<span class=o>=</span><span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1在字母顺序上小于string2或与string2完全相同<span class=o>]</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>string1<span class=w> </span>&gt;<span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1在字母顺序上大于string2<span class=o>]</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>string1<span class=w> </span>&gt;<span class=o>=</span><span class=w> </span>string2<span class=w>  </span><span class=o>[</span>string1在字母顺序上大于string2或与string2完全相同<span class=o>]</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>integer1<span class=w> </span>-eq<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1等于integer2<span class=o>]</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>integer1<span class=w> </span>-ge<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1大于或等于integer2<span class=o>]</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>integer1<span class=w> </span>-gt<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1大于integer2<span class=o>]</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>integer1<span class=w> </span>-le<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1小于或等于integer2<span class=o>]</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>integer1<span class=w> </span>-lt<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1小于integer2<span class=o>]</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>integer1<span class=w> </span>-ne<span class=w> </span>integer2<span class=w>  </span><span class=o>[</span>integer1不等于integer2<span class=o>]</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>prefixinteger1<span class=w> </span>-pgt<span class=w> </span>prefixinteger2<span class=w>  </span><span class=o>[</span>剔除非数字字符首部之后，integer1大于integer2<span class=o>]</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>prefixinteger1<span class=w> </span>-plt<span class=w> </span>prefixinteger2<span class=w>  </span><span class=o>[</span>剔除非数字字符首部之后，integer1小于integer2<span class=o>]</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>file1<span class=w> </span>-nt<span class=w> </span>file2<span class=w>  </span><span class=o>[</span>file1的修改时间比file2新<span class=o>]</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>file1<span class=w> </span>-ot<span class=w> </span>file2<span class=w>  </span><span class=o>[</span>file1的修改时间比file2旧<span class=o>]</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>-d<span class=w> </span>file<span class=w>  </span><span class=o>[</span>file存在并且是一个目录<span class=o>]</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>-e<span class=w> </span>file<span class=w>  </span><span class=o>[</span>file存在<span class=o>]</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>-f<span class=w> </span>file<span class=w>  </span><span class=o>[</span>file存在并且不是一个目录<span class=o>]</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>-s<span class=w> </span>file<span class=w>  </span><span class=o>[</span>file存在并且文件尺寸大于零<span class=o>]</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>-n<span class=w> </span>string<span class=w>  </span><span class=o>[</span>string的长度大于零<span class=o>]</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>string<span class=w>     </span><span class=o>[</span>string的长度大于零<span class=o>]</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>-z<span class=w> </span>string<span class=w>  </span><span class=o>[</span>string的长度等于零<span class=o>]</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=o>(</span><span class=w> </span>expression<span class=w> </span><span class=o>)</span><span class=w>  </span>将expression视为一个整体<span class=o>(</span>分组<span class=o>)</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>!<span class=w> </span>expression<span class=w>   </span>非<span class=o>(</span>NOT<span class=o>)</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>expression1<span class=w> </span>-a<span class=w> </span>expression2<span class=w>   </span>与<span class=o>(</span>AND<span class=o>)</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>expression1<span class=w> </span>-o<span class=w> </span>expression2<span class=w>   </span>或<span class=o>(</span>OR<span class=o>)</span>
</code></pre></div> <ul> <li><strong>true</strong></li> </ul> <p>不做任何事，只返回一个成功的结果。主要用在if/while之类的控制构造中。</p> <ul> <li><strong>unset envvars</strong></li> </ul> <p>撤销环境变量"envvar"</p> <ul> <li><strong>videoinfo [[WxH]xD]</strong></li> </ul> <p>列出所有当前可用的视频模式。如果指定了分辨率(或者还附加了色深)，那么仅显示与其匹配的模式。</p> <h2 id=grub2_3>八 grub2安全<a class=headerlink href=#grub2_3 title="Permanent link">&para;</a></h2> <p>在默认情况下，GRUB对于所有可以在物理上进入控制台的人都是可访问的。任何人都可以选择并编辑任意菜单项，并且可以直接访问GRUB SHELL。要启用认证支持，必须将环境变量"superusers"设置为一组用户名(可用空格/逗号/分号作为分隔符)，这样，将仅允许"superusers"中的用户使用GRUB命令行、编辑菜单项、以及执行任意菜单项。而其他非"superusers"中的用户，只能执行那些没有设置 --users 选项的菜单，以及那些在 --users 选项中包含了该用户的菜单，但不能使用GRUB命令行、编辑菜单项。下面使用一个配置片段举例说明：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nb>set</span><span class=w> </span><span class=nv>superusers</span><span class=o>=</span><span class=s2>&quot;root&quot;</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>password_pbkdf2<span class=w> </span>root<span class=w> </span>grub.pbkdf2.sha512.10000.biglongstring
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>password<span class=w> </span>user1<span class=w> </span>insecure
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>menuentry<span class=w> </span><span class=s2>&quot;所有人都可以执行此菜单&quot;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span>...
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=o>}</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>menuentry<span class=w> </span><span class=s2>&quot;仅允许超级用户执行此菜单&quot;</span><span class=w> </span>--users<span class=w> </span><span class=s2>&quot;&quot;</span><span class=w> </span><span class=o>{</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>    </span>...
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=o>}</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>menuentry<span class=w> </span><span class=s2>&quot;允许 user1 和超级用户执行此菜单&quot;</span><span class=w> </span>--users<span class=w> </span>user1<span class=w> </span><span class=o>{</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=w>    </span>...
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=o>}</span>
</code></pre></div> <p>有关GRUB2安全的更多详情，请参考GRUB2手册中的"<a href=http://www.gnu.org/software/grub/manual/html_node/Security.html>Security</a>"部分。</p> <h2 id=gurb2>九 gurb2实用技巧<a class=headerlink href=#gurb2 title="Permanent link">&para;</a></h2> <h3 id=91-grub2>9.1 为grub2菜单加上背景图<a class=headerlink href=#91-grub2 title="Permanent link">&para;</a></h3> <p>首先制作一张PNG格式的图片，分辨率最好是"1024x768"以保证较好的兼容性。然后将这张图片放到"$prefix/themes/1024x768.png"("$prefix"是GRUB2的安装目录)。然后在'grub.cfg'中加入如下内容：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nb>set</span><span class=w> </span><span class=nv>gfxmode</span><span class=o>=</span>1024x768,auto
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>insmod<span class=w> </span>gfxterm
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>insmod<span class=w> </span>png
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>terminal_output<span class=w>  </span>gfxterm
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>background_image<span class=w> </span><span class=nv>$prefix</span>/themes/1024x768.png
</code></pre></div> <h3 id=92-grub2>9.2 让grub2显示中文界面(包括显示中文菜单项)<a class=headerlink href=#92-grub2 title="Permanent link">&para;</a></h3> <p>由于GRUB2在内部使用**UTF-8**编码，并且所有文本文件(包括'grub.cfg')也都被假定为使用UTF-8编码，为了避免乱码，请务必以UTF-8编码保存'grub.cfg'文件。</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nb>set</span><span class=w> </span><span class=nv>gfxterm_font</span><span class=o>=</span>unicode
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=nb>set</span><span class=w> </span><span class=nv>lang</span><span class=o>=</span>zh_CN
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=nb>set</span><span class=w> </span><span class=nv>locale_dir</span><span class=o>=</span><span class=nv>$prefix</span>/locale
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>insmod<span class=w> </span>gfxterm
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>terminal_output<span class=w>  </span>gfxterm
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>loadfont<span class=w> </span>unicode
</code></pre></div> <h3 id=93-grub2>9.3 设置grub2字体<a class=headerlink href=#93-grub2 title="Permanent link">&para;</a></h3> <p>如果你认为默认的unicode字体在1024x768或更高分辨率的屏幕上显得太小，或者你认为默认的字体不好看，想换换口味，那么如何自己动手制作一个pf2字体呢？那就要用到"grub-mkfont"工具。下面的示例展示了如何从一个ttc字体(文泉驿等宽微米黑)制作一个24px大小的pf2字体：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>grub-mkfont<span class=w> </span>-i1<span class=w> </span>-n<span class=w> </span>WenQuanYiMicroHeiMono24px<span class=w> </span>-o<span class=w> </span>WenQuanYiMicroHeiMono24px.pf2<span class=w> </span>-s24<span class=w> </span>-v<span class=w> </span>wqy-microhei.ttc
</code></pre></div> <p>将制作好的字体文件(WenQuanYiMicroHeiMono24px.pf2)放到"$prefix/fonts"目录中，修改'grub.cfg'文件中的两行：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nb>set</span><span class=w> </span><span class=nv>gfxterm_font</span><span class=o>=</span>WenQuanYiMicroHeiMono24px
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>loadfont<span class=w> </span>WenQuanYiMicroHeiMono24px
</code></pre></div> <p>[注意]你最好使用等宽中文字体(推荐使用文泉驿等宽正黑或者等宽微米黑)，否则可能会让GRUB2的字体间距过大，十分难看。</p> <h3 id=94-grub2windows-peiso>9.4 使用grub2引导Windows PE的ISO文件<a class=headerlink href=#94-grub2windows-peiso title="Permanent link">&para;</a></h3> <p>GRUB4DOS有一个非常酷的'磁盘映射'功能，能够用于启动WinPE的ISO文件。其实，将GRUB2配合<a href=http://www.syslinux.org/wiki/index.php/MEMDISK>MEMDISK</a>工具使用，同样可以引导各种映像文件，包括ISO文件与软/硬盘映像。</p> <p>首先，你必须安装或者下载"<a href=https://www.kernel.org/pub/linux/utils/boot/syslinux/ >syslinux</a>"软件包，从中提取出"memdisk"文件(可能位于'/usr/share/syslinux/memdisk'或'bios/memdisk/memdisk')，然后将它复制到GRUB2的安装目录中(本文假定其位于"winpe"子目录中，也就是"$prefix/winpe/memdisk")。</p> <p>然后，将你想要引导的WindowsPE的ISO文件放到某个地方(本文假定其位于"$prefix/winpe/WinPE.ISO")。当然，为了节约磁盘空间，你也可以用gzip对ISO文件进行压缩，不过这个示例中没有这么做。</p> <p>最后，在'grub.cfg'中加入如下菜单项(如果你对ISO进行了gzip压缩，那么还需要额外再加上"insmod gzio"命令)：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>menuentry<span class=w> </span><span class=s2>&quot;[BIOS] Windows PE&quot;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span>linux16<span class=w>  </span><span class=nv>$prefix</span>/winpe/memdisk<span class=w> </span>iso<span class=w> </span>raw
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span>initrd16<span class=w> </span><span class=nv>$prefix</span>/winpe/WinPE.ISO
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=o>}</span>
</code></pre></div> <p>[注意]与GRUB4DOS一样，由于<a href=http://www.syslinux.org/wiki/index.php/MEMDISK>MEMDISK</a>对各种映像文件的模拟是通过在实模式下拦截BIOS的 INT 13h 与 INT 15h 调用来实现的，所以有很大的局限性：</p> <ul> <li>只能用于BIOS模式启动，不能用于UEFI模式启动</li> <li>模拟出来的软盘/光盘/硬盘设备只能被基于实模式的操作系统所识别(DOS,FreeDOS)，不能被基于保护模式的操作系统所识别(Windows,Linux,BSD)</li> <li>从实用的角度来说，只能用于引导WinPE的ISO以及基于DOS/FreeDOS的映像，不能用于引导各种Linux的LiveCD ISO以及微软原版的Windows ISO安装光盘。</li> </ul> <p>[释疑]不要将<a href=http://www.syslinux.org/wiki/index.php/MEMDISK>MEMDISK</a>与GRUB2的"memdisk.mod"模块混淆，他们是两个毫不相干的东西。"memdisk.mod"模块的作用是为'core.img'提供内存盘支持，其目的是为了让GRUB2能够正确识别启动设备。如果把'core.img'比作Linux内核，那么"memdisk.mod"模块的作用就相当于为'core.img'这个"内核"提供了'initramdisk'，用以加载磁盘与文件系统驱动，从而让GRUB2可以访问磁盘，进而加载其他的模块。但是实际上，在绝大多数情况下，更本不需要使用"memdisk.mod"，因为在'grub-install'的时候，这些驱动已经被嵌入到'core.img'中了。如果你还是不明白"memdisk.mod"模块的作用的话，那就忘记它的存在吧，因为你更本不需要知道有这个东西，就像你不需要了解全部GRUB2模块一样。仅仅是因为这两个东西的名字相同，我才在这里多罗嗦了几句而已。</p> <h3 id=95-grub2windows-pewim>9.5 使用grub2引导Windows PE的WIM文件<a class=headerlink href=#95-grub2windows-pewim title="Permanent link">&para;</a></h3> <p>由于GRUB2不能在UEFI模式下对ISO文件进行仿真，那么我们应该如何在UEFI模式下引导WindowsPE呢？答案是必须使用WIM格式的WindowsPE。 具体说来就是首先用GRUB2链式加载微软的"bootmgfw.efi"引导管理器，然后再由"bootmgfw.efi"根据BCD文件的指引去启动WindowsPE。</p> <p>第一步，从例如"<a href=http://www.wepe.com.cn/ >微PE</a>"这样的作品中提取"WEPE64.WIM"与"WEPE.SDI"(BOOT.SDI)文件。 第二步，从Win10的原版安装光盘中提取"bootmgfw.efi"文件(/efi/boot/bootx64.efi)。 第三步，将提取的三个文件放置到一个FAT32或NTFS磁盘分区上，这里假定放到'(hd0,gpt3)/winpe/'目录中。 第四步，仿照下面的命令序列编写一个BCD文件：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>bcdedit<span class=w> </span>/createstore<span class=w>  </span>BCD
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/create<span class=w> </span><span class=o>{</span>dddddddd-dddd-dddd-dddd-dddddddddddd<span class=o>}</span><span class=w> </span>/device
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>dddddddd-dddd-dddd-dddd-dddddddddddd<span class=o>}</span><span class=w> </span>RAMDISKSDIDEVICE<span class=w> </span>BOOT
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>dddddddd-dddd-dddd-dddd-dddddddddddd<span class=o>}</span><span class=w> </span>RAMDISKSDIPATH<span class=w> </span><span class=s2>&quot;\winpe\WEPE.SDI&quot;</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/create<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>/d<span class=w> </span><span class=s2>&quot;UEFI Windows PE x64&quot;</span><span class=w> </span>/application<span class=w> </span>OSLOADER
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>DEVICE<span class=w> </span><span class=nv>RAMDISK</span><span class=o>=[</span>BOOT<span class=o>]</span><span class=se>\w</span>inpe<span class=se>\W</span>EPE64.WIM,<span class=o>{</span>dddddddd-dddd-dddd-dddd-dddddddddddd<span class=o>}</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>HIGHESTMODE<span class=w> </span>YES
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OSDEVICE<span class=w> </span><span class=nv>RAMDISK</span><span class=o>=[</span>BOOT<span class=o>]</span><span class=se>\w</span>inpe<span class=se>\W</span>EPE64.WIM,<span class=o>{</span>dddddddd-dddd-dddd-dddd-dddddddddddd<span class=o>}</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>SYSTEMROOT<span class=w> </span><span class=s2>&quot;\Windows&quot;</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>WINPE<span class=w> </span>YES
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>LOCALE<span class=w> </span><span class=s2>&quot;zh-CN&quot;</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>NX<span class=w> </span>OptIn
<a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>PAE<span class=w> </span>ForceEnable
<a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>detecthal<span class=w> </span>Yes
<a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>DEBUGSTART<span class=w> </span>DISABLE
<a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>RECOVERYENABLED<span class=w> </span>NO
<a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/bootems<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OFF
<a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/ems<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OFF
<a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/bootdebug<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OFF
<a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/debug<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OFF
<a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/event<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span><span class=w> </span>OFF
<a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a>
<a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/create<span class=w> </span><span class=o>{</span>bootmgr<span class=o>}</span><span class=w> </span>/d<span class=w> </span><span class=s2>&quot;Windows PE Boot Manager&quot;</span>
<a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>bootmgr<span class=o>}</span><span class=w> </span>DEVICE<span class=w> </span>BOOT
<a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>bootmgr<span class=o>}</span><span class=w> </span>LOCALE<span class=w> </span><span class=s2>&quot;zh-CN&quot;</span>
<a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/set<span class=w> </span><span class=o>{</span>bootmgr<span class=o>}</span><span class=w> </span>nointegritychecks<span class=w> </span>Yes
<a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/displayorder<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span>
<a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/default<span class=w> </span><span class=o>{</span>aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa<span class=o>}</span>
<a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a>bcdedit<span class=w> </span>/store<span class=w> </span>BCD<span class=w> </span>/timeout<span class=w> </span><span class=m>10</span>
</code></pre></div> <p>第五步，将生成的BCD文件同样放置到'(hd0,gpt3)/winpe/'目录中。 最后，在'grub.cfg'中加入如下菜单项：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>menuentry<span class=w> </span><span class=s1>&#39;UEFI Windows PE Boot Manager&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span>chainloader<span class=w> </span><span class=o>(</span>hd0,gpt3<span class=o>)</span>/winpe/bootmgfw.efi
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=o>}</span>
</code></pre></div> <h3 id=96-grub2gentoo-livecd-iso>9.6 使用grub2引导(硬盘安装)Gentoo LiveCD 的ISO文件<a class=headerlink href=#96-grub2gentoo-livecd-iso title="Permanent link">&para;</a></h3> <p>以"install-amd64-minimal-*.iso"为例。 第一步，将ISO中的'/boot/{gentoo,gentoo.igz}'、'/image.squashfs'三个文件放到'(hd0,gpt3)/os/gentoo/'目录中； 第二步，将ISO中的'/livecd'放到相同分区(hd0,gpt3)的根目录下； 最后，在'grub.cfg'中加入如下菜单项：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>menuentry<span class=w> </span><span class=s2>&quot;Gentoo Minimal Install LiveCD&quot;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span>linux<span class=w>  </span><span class=o>(</span>hd0,gpt3<span class=o>)</span>/os/gentoo/gentoo<span class=w> </span>cdroot<span class=w> </span><span class=nv>looptype</span><span class=o>=</span>squashfs<span class=w> </span><span class=nv>loop</span><span class=o>=</span>/os/gentoo/image.squashfs
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span>initrd<span class=w> </span><span class=o>(</span>hd0,gpt3<span class=o>)</span>/os/gentoo/gentoo.igz
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=o>}</span>
</code></pre></div> <p>[提示]'livecd'是寻找'image.squashfs'所在磁盘分区的关键。</p> <p>[提示] Gentoo LiveCD 亦可使用与其他Linux发行版的LiveCD类似的方法启动(也就是使用"isoboot="参数)。</p> <h3 id=97-grub2-linux-livecd-iso>9.7 使用GRUB2引导(硬盘安装)各种 Linux LiveCD 的ISO文件<a class=headerlink href=#97-grub2-linux-livecd-iso title="Permanent link">&para;</a></h3> <p>首先需要说明的是，这里给出的方法，只适用于提供了"img_loop="或"iso-scan/filename="或"fromiso="或"isoboot="或"isoloop="之类参数的LiveCD。</p> <p>下面以 Ubuntu 的 LiveCD 为例说明。首先，假定你将ISO文件放在'(hd0,gpt3)/ISO/Ubuntu.iso'；然后，在'grub.cfg'中加入如下菜单项：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>menuentry<span class=w> </span><span class=s2>&quot;Ubuntu LiveCD&quot;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=o>(</span>hd0,gpt3<span class=o>)</span>/ISO/Ubuntu.iso
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/casper/vmlinuz<span class=w> </span><span class=nv>boot</span><span class=o>=</span>casper<span class=w> </span>iso-scan/filename<span class=o>=</span>/ISO/Ubuntu.iso
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/casper/initrd.lz
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=o>}</span>
</code></pre></div> <p>[说明]这里给出的方法，其实就是各种"硬盘安装 XX Linux"的翻版，只不过不再需要将"vmlinuz"与"initrd"从ISO中解压出来而已。</p> <p>更多其它发行版的实例，请继续阅读下面的内容。</p> <h2 id=grubcfg>十 grub.cfg 实例<a class=headerlink href=#grubcfg title="Permanent link">&para;</a></h2> <p>下面是本文作者实际使用的一个"grub.cfg"文件，通用于BIOS与UEFI模式，放在这里当作一个实例，供读者参考：</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>#由于&quot;$prefix&quot;的值是在&quot;grub-install&quot;安装时确定的，并且嵌入&#39;core.img&#39;中的模块也是随硬件变化的，</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=c1>#所以不要只是简单的复制&#39;grub&#39;目录到处使用，而应该在每一个介质上都使用&quot;grub-install&quot;进行安装。</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=c1>###############################################################################</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1>#(1)本配置文件要求&quot;grub&quot;目录所在分区的卷标必须是&quot;GRUB2&quot;。</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=c1>#(2)为了保持最大程度的BIOS兼容性，&quot;GRUB2&quot;分区必须位于磁盘的前 137GB 范围。</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=c1>###############################################################################</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=c1># 如果要在windows上安装GRUB2的话，必须首先以管理员身份打开命令提示符，然后运行</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=c1># wmic diskdrive list brief</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=c1># 命令查看安装目标，最后再使用例如下面这样的命令进行安装：</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=c1># grub-install.exe --boot-directory=g: --recheck --target=x86_64-efi --efi-directory=g: --no-nvram --removable \\.\PHYSICALDRIVE5</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=c1># grub-install.exe --boot-directory=g: --recheck --target=i386-pc \\.\PHYSICALDRIVE5</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=c1># 如果&quot;GRUB2&quot;分区不在磁盘的前 137GB 范围，可以尝试使用下面的命令安装(不完美的补救措施)：</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=c1># grub-install.exe --boot-directory=g: --recheck --target=i386-pc --disk-module=native \\.\PHYSICALDRIVE5</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=c1>###############################################################################</span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=c1># binwalk initrd.img</span>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=c1># https://unix.stackexchange.com/questions/163346/why-is-it-that-my-initrd-only-has-one-directory-namely-kernel</span>
<a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>
<a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a>
<a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=nb>set</span><span class=w> </span><span class=nv>label</span><span class=o>=</span>GRUB2
<a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=nb>set</span><span class=w> </span><span class=nv>check_signatures</span><span class=o>=</span>no
<a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=nb>set</span><span class=w> </span><span class=nv>default</span><span class=o>=</span><span class=m>0</span>
<a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=nb>set</span><span class=w> </span><span class=nv>fallback</span><span class=o>=</span><span class=m>1</span>
<a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=nb>set</span><span class=w> </span><span class=nv>gfxmode</span><span class=o>=</span>1024x768,auto
<a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=nb>set</span><span class=w> </span><span class=nv>gfxterm_font</span><span class=o>=</span>WenQuanYiMicroHeiMono
<a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a><span class=nb>set</span><span class=w> </span><span class=nv>lang</span><span class=o>=</span>zh_CN
<a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=nb>set</span><span class=w> </span><span class=nv>locale_dir</span><span class=o>=</span><span class=nv>$prefix</span>/locale
<a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a><span class=nb>set</span><span class=w> </span><span class=nv>pager</span><span class=o>=</span><span class=m>1</span>
<a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a><span class=nb>set</span><span class=w> </span><span class=nv>superusers</span><span class=o>=</span>root
<a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=nb>set</span><span class=w> </span><span class=nv>timeout</span><span class=o>=</span><span class=m>5</span>
<a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a>
<a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a>
<a id=__codelineno-16-32 name=__codelineno-16-32 href=#__codelineno-16-32></a>insmod<span class=w> </span>part_gpt
<a id=__codelineno-16-33 name=__codelineno-16-33 href=#__codelineno-16-33></a>insmod<span class=w> </span>part_msdos
<a id=__codelineno-16-34 name=__codelineno-16-34 href=#__codelineno-16-34></a>insmod<span class=w> </span>fat
<a id=__codelineno-16-35 name=__codelineno-16-35 href=#__codelineno-16-35></a>insmod<span class=w> </span>exfat
<a id=__codelineno-16-36 name=__codelineno-16-36 href=#__codelineno-16-36></a>insmod<span class=w> </span>ntfs
<a id=__codelineno-16-37 name=__codelineno-16-37 href=#__codelineno-16-37></a>insmod<span class=w> </span>iso9660
<a id=__codelineno-16-38 name=__codelineno-16-38 href=#__codelineno-16-38></a>insmod<span class=w> </span>ext2
<a id=__codelineno-16-39 name=__codelineno-16-39 href=#__codelineno-16-39></a>insmod<span class=w> </span>xfs
<a id=__codelineno-16-40 name=__codelineno-16-40 href=#__codelineno-16-40></a>insmod<span class=w> </span>all_video
<a id=__codelineno-16-41 name=__codelineno-16-41 href=#__codelineno-16-41></a>insmod<span class=w> </span>gfxterm
<a id=__codelineno-16-42 name=__codelineno-16-42 href=#__codelineno-16-42></a>insmod<span class=w> </span>png
<a id=__codelineno-16-43 name=__codelineno-16-43 href=#__codelineno-16-43></a>
<a id=__codelineno-16-44 name=__codelineno-16-44 href=#__codelineno-16-44></a>
<a id=__codelineno-16-45 name=__codelineno-16-45 href=#__codelineno-16-45></a>terminal_output<span class=w>  </span>gfxterm
<a id=__codelineno-16-46 name=__codelineno-16-46 href=#__codelineno-16-46></a>background_image<span class=w> </span><span class=nv>$prefix</span>/themes/wmoon.png
<a id=__codelineno-16-47 name=__codelineno-16-47 href=#__codelineno-16-47></a>loadfont<span class=w>  </span>24px
<a id=__codelineno-16-48 name=__codelineno-16-48 href=#__codelineno-16-48></a>password_pbkdf2<span class=w> </span>root<span class=w> </span>grub.pbkdf2.sha512.69.3AE287EEFF7205CC.C0C0B1517369963D14FADE30BE588E56D88E86451C9D3FB9B51917DBBF2F8E8A
<a id=__codelineno-16-49 name=__codelineno-16-49 href=#__codelineno-16-49></a>
<a id=__codelineno-16-50 name=__codelineno-16-50 href=#__codelineno-16-50></a>
<a id=__codelineno-16-51 name=__codelineno-16-51 href=#__codelineno-16-51></a>menuentry<span class=w> </span><span class=s1>&#39;正常启动(Windows)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-52 name=__codelineno-16-52 href=#__codelineno-16-52></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s1>&#39;pc&#39;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nv>$grub_platform</span><span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-53 name=__codelineno-16-53 href=#__codelineno-16-53></a><span class=w>        </span><span class=k>if</span><span class=w> </span>search<span class=w> </span>--file<span class=w> </span>--set<span class=w> </span>/bootmgr<span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-54 name=__codelineno-16-54 href=#__codelineno-16-54></a><span class=w>            </span>chainloader<span class=w> </span>+1
<a id=__codelineno-16-55 name=__codelineno-16-55 href=#__codelineno-16-55></a><span class=w>        </span><span class=k>elif</span><span class=w> </span>search<span class=w> </span>--file<span class=w> </span>--set<span class=w> </span>/ntldr<span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-56 name=__codelineno-16-56 href=#__codelineno-16-56></a><span class=w>            </span>chainloader<span class=w> </span>+1
<a id=__codelineno-16-57 name=__codelineno-16-57 href=#__codelineno-16-57></a><span class=w>        </span><span class=k>fi</span>
<a id=__codelineno-16-58 name=__codelineno-16-58 href=#__codelineno-16-58></a><span class=w>    </span><span class=k>elif</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s1>&#39;efi&#39;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nv>$grub_platform</span><span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-59 name=__codelineno-16-59 href=#__codelineno-16-59></a><span class=w>        </span><span class=k>if</span><span class=w> </span>search<span class=w> </span>--file<span class=w> </span>--set<span class=w> </span>/EFI/Microsoft/Boot/bootmgfw.efi<span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-60 name=__codelineno-16-60 href=#__codelineno-16-60></a><span class=w>            </span>chainloader<span class=w> </span>/EFI/Microsoft/Boot/bootmgfw.efi
<a id=__codelineno-16-61 name=__codelineno-16-61 href=#__codelineno-16-61></a><span class=w>        </span><span class=k>fi</span>
<a id=__codelineno-16-62 name=__codelineno-16-62 href=#__codelineno-16-62></a><span class=w>    </span><span class=k>fi</span>
<a id=__codelineno-16-63 name=__codelineno-16-63 href=#__codelineno-16-63></a><span class=o>}</span>
<a id=__codelineno-16-64 name=__codelineno-16-64 href=#__codelineno-16-64></a>
<a id=__codelineno-16-65 name=__codelineno-16-65 href=#__codelineno-16-65></a>
<a id=__codelineno-16-66 name=__codelineno-16-66 href=#__codelineno-16-66></a><span class=c1>#http://www.wepe.com.cn/download.html</span>
<a id=__codelineno-16-67 name=__codelineno-16-67 href=#__codelineno-16-67></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s1>&#39;pc&#39;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nv>$grub_platform</span><span class=w> </span>-a<span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/memdisk<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-68 name=__codelineno-16-68 href=#__codelineno-16-68></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/win8pe64.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-69 name=__codelineno-16-69 href=#__codelineno-16-69></a><span class=w>        </span>menuentry<span class=w> </span><span class=s1>&#39;[BIOS]启动64位 Win 8 PE (微PE)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-70 name=__codelineno-16-70 href=#__codelineno-16-70></a><span class=w>            </span>linux16<span class=w>  </span><span class=nv>$prefix</span>/winpe/memdisk<span class=w> </span>iso<span class=w> </span>raw
<a id=__codelineno-16-71 name=__codelineno-16-71 href=#__codelineno-16-71></a><span class=w>            </span>initrd16<span class=w> </span><span class=nv>$prefix</span>/winpe/win8pe64.iso
<a id=__codelineno-16-72 name=__codelineno-16-72 href=#__codelineno-16-72></a><span class=w>        </span><span class=o>}</span>
<a id=__codelineno-16-73 name=__codelineno-16-73 href=#__codelineno-16-73></a><span class=w>    </span><span class=k>fi</span>
<a id=__codelineno-16-74 name=__codelineno-16-74 href=#__codelineno-16-74></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/win10pe64.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-75 name=__codelineno-16-75 href=#__codelineno-16-75></a><span class=w>        </span>menuentry<span class=w> </span><span class=s1>&#39;[BIOS]启动64位 Win 10 PE (微PE)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-76 name=__codelineno-16-76 href=#__codelineno-16-76></a><span class=w>            </span>linux16<span class=w>  </span><span class=nv>$prefix</span>/winpe/memdisk<span class=w> </span>iso<span class=w> </span>raw
<a id=__codelineno-16-77 name=__codelineno-16-77 href=#__codelineno-16-77></a><span class=w>            </span>initrd16<span class=w> </span><span class=nv>$prefix</span>/winpe/win10pe64.iso
<a id=__codelineno-16-78 name=__codelineno-16-78 href=#__codelineno-16-78></a><span class=w>        </span><span class=o>}</span>
<a id=__codelineno-16-79 name=__codelineno-16-79 href=#__codelineno-16-79></a><span class=w>    </span><span class=k>fi</span>
<a id=__codelineno-16-80 name=__codelineno-16-80 href=#__codelineno-16-80></a><span class=k>fi</span>
<a id=__codelineno-16-81 name=__codelineno-16-81 href=#__codelineno-16-81></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s1>&#39;efi&#39;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nv>$grub_platform</span><span class=w> </span>-a<span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/bootmgfw.efi<span class=w> </span>-a<span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/BCD<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-82 name=__codelineno-16-82 href=#__codelineno-16-82></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/win10pe64.wim<span class=w> </span>-a<span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/winpe/win8pe64.wim<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-83 name=__codelineno-16-83 href=#__codelineno-16-83></a><span class=w>        </span>menuentry<span class=w> </span><span class=s1>&#39;[UEFI]启动64位 Windows 8/10 PE →&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-84 name=__codelineno-16-84 href=#__codelineno-16-84></a><span class=w>            </span>chainloader<span class=w> </span><span class=nv>$prefix</span>/winpe/bootmgfw.efi
<a id=__codelineno-16-85 name=__codelineno-16-85 href=#__codelineno-16-85></a><span class=w>        </span><span class=o>}</span>
<a id=__codelineno-16-86 name=__codelineno-16-86 href=#__codelineno-16-86></a><span class=w>    </span><span class=k>fi</span>
<a id=__codelineno-16-87 name=__codelineno-16-87 href=#__codelineno-16-87></a><span class=k>fi</span>
<a id=__codelineno-16-88 name=__codelineno-16-88 href=#__codelineno-16-88></a>
<a id=__codelineno-16-89 name=__codelineno-16-89 href=#__codelineno-16-89></a>
<a id=__codelineno-16-90 name=__codelineno-16-90 href=#__codelineno-16-90></a><span class=c1>#https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/</span>
<a id=__codelineno-16-91 name=__codelineno-16-91 href=#__codelineno-16-91></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/archlinux.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-92 name=__codelineno-16-92 href=#__codelineno-16-92></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Arch Linux LiveCD [root/空]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-93 name=__codelineno-16-93 href=#__codelineno-16-93></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/archlinux.iso
<a id=__codelineno-16-94 name=__codelineno-16-94 href=#__codelineno-16-94></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/arch/boot/x86_64/vmlinuz<span class=w> </span><span class=nv>img_label</span><span class=o>=</span><span class=nv>$label</span><span class=w> </span><span class=nv>img_loop</span><span class=o>=</span>/grub/linux/archlinux.iso<span class=w>   </span>systemd.wants<span class=o>=</span>sshd.service
<a id=__codelineno-16-95 name=__codelineno-16-95 href=#__codelineno-16-95></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/arch/boot/x86_64/archiso.img
<a id=__codelineno-16-96 name=__codelineno-16-96 href=#__codelineno-16-96></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-97 name=__codelineno-16-97 href=#__codelineno-16-97></a><span class=k>fi</span>
<a id=__codelineno-16-98 name=__codelineno-16-98 href=#__codelineno-16-98></a>
<a id=__codelineno-16-99 name=__codelineno-16-99 href=#__codelineno-16-99></a><span class=c1>#https://mirrors.163.com/gentoo/releases/amd64/autobuilds/current-install-amd64-minimal/</span>
<a id=__codelineno-16-100 name=__codelineno-16-100 href=#__codelineno-16-100></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/install-amd64-minimal.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-101 name=__codelineno-16-101 href=#__codelineno-16-101></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Mini Gentoo LiveCD [root/123]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-102 name=__codelineno-16-102 href=#__codelineno-16-102></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/install-amd64-minimal.iso
<a id=__codelineno-16-103 name=__codelineno-16-103 href=#__codelineno-16-103></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/boot/gentoo<span class=w> </span>cdroot<span class=w> </span><span class=nv>isoboot</span><span class=o>=</span>/grub/linux/install-amd64-minimal.iso<span class=w>  </span>dosshd<span class=w> </span>nokeymap<span class=w> </span><span class=nv>passwd</span><span class=o>=</span><span class=m>123</span>
<a id=__codelineno-16-104 name=__codelineno-16-104 href=#__codelineno-16-104></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/boot/gentoo.igz
<a id=__codelineno-16-105 name=__codelineno-16-105 href=#__codelineno-16-105></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-106 name=__codelineno-16-106 href=#__codelineno-16-106></a><span class=k>fi</span>
<a id=__codelineno-16-107 name=__codelineno-16-107 href=#__codelineno-16-107></a>
<a id=__codelineno-16-108 name=__codelineno-16-108 href=#__codelineno-16-108></a><span class=c1>#https://mirror-hk.koddos.net/calculate-linux/release/</span>
<a id=__codelineno-16-109 name=__codelineno-16-109 href=#__codelineno-16-109></a><span class=c1>#https://www.calculate-linux.org/main/en/download</span>
<a id=__codelineno-16-110 name=__codelineno-16-110 href=#__codelineno-16-110></a><span class=c1># Calculate Linux Scratch 是基于Gentoo制作的 LiveCD ，包含编译工具、支持WiFi</span>
<a id=__codelineno-16-111 name=__codelineno-16-111 href=#__codelineno-16-111></a><span class=c1># 既可用作LFS(Linux From Scratch)的宿主系统、也可用于安装 Gentoo</span>
<a id=__codelineno-16-112 name=__codelineno-16-112 href=#__codelineno-16-112></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/cls.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-113 name=__codelineno-16-113 href=#__codelineno-16-113></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Live GCC x64 [root/root]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-114 name=__codelineno-16-114 href=#__codelineno-16-114></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/cls.iso
<a id=__codelineno-16-115 name=__codelineno-16-115 href=#__codelineno-16-115></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/boot/vmlinuz<span class=w> </span><span class=nv>root</span><span class=o>=</span>live<span class=w> </span>iso-scan/filename<span class=o>=</span>/grub/linux/cls.iso<span class=w>   </span><span class=nv>vga</span><span class=o>=</span>current<span class=w> </span>nodevfs<span class=w> </span>noresume<span class=w> </span>nodmraid
<a id=__codelineno-16-116 name=__codelineno-16-116 href=#__codelineno-16-116></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/boot/initrd
<a id=__codelineno-16-117 name=__codelineno-16-117 href=#__codelineno-16-117></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-118 name=__codelineno-16-118 href=#__codelineno-16-118></a><span class=k>fi</span>
<a id=__codelineno-16-119 name=__codelineno-16-119 href=#__codelineno-16-119></a>
<a id=__codelineno-16-120 name=__codelineno-16-120 href=#__codelineno-16-120></a><span class=c1>#https://mirrors.huaweicloud.com/centos/7/isos/x86_64/</span>
<a id=__codelineno-16-121 name=__codelineno-16-121 href=#__codelineno-16-121></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-LiveGNOME.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-122 name=__codelineno-16-122 href=#__codelineno-16-122></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;CentOS 7.8 GNOME LiveCD [root/空](可退出liveuser后再用root登录)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-123 name=__codelineno-16-123 href=#__codelineno-16-123></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-LiveGNOME.iso
<a id=__codelineno-16-124 name=__codelineno-16-124 href=#__codelineno-16-124></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/vmlinuz0<span class=w> </span>rd.live.image<span class=w> </span><span class=nv>root</span><span class=o>=</span>live:CDLABEL<span class=o>=</span>CentOS-7-x86_64-LiveGNOME-2003<span class=w> </span>iso-scan/filename<span class=o>=</span>/grub/linux/CentOS-LiveGNOME.iso<span class=w>   </span>systemd.wants<span class=o>=</span>sshd.service<span class=w> </span>inst.lang<span class=o>=</span>zh_CN
<a id=__codelineno-16-125 name=__codelineno-16-125 href=#__codelineno-16-125></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/initrd0.img
<a id=__codelineno-16-126 name=__codelineno-16-126 href=#__codelineno-16-126></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-127 name=__codelineno-16-127 href=#__codelineno-16-127></a><span class=k>fi</span>
<a id=__codelineno-16-128 name=__codelineno-16-128 href=#__codelineno-16-128></a>
<a id=__codelineno-16-129 name=__codelineno-16-129 href=#__codelineno-16-129></a><span class=c1>#https://ftp.sjtu.edu.cn/fedora/linux/releases/32/Spins/x86_64/iso/</span>
<a id=__codelineno-16-130 name=__codelineno-16-130 href=#__codelineno-16-130></a><span class=c1>#只有 Xfce LiveCD 可以设置中文界面</span>
<a id=__codelineno-16-131 name=__codelineno-16-131 href=#__codelineno-16-131></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/Fedora-Xfce-Live.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-132 name=__codelineno-16-132 href=#__codelineno-16-132></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Fedora 32 Xfce LiveCD [root/空](自动liveuser登录但可切换至root用户)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-133 name=__codelineno-16-133 href=#__codelineno-16-133></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/Fedora-Xfce-Live.iso
<a id=__codelineno-16-134 name=__codelineno-16-134 href=#__codelineno-16-134></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/vmlinuz<span class=w> </span>rd.live.image<span class=w> </span><span class=nv>root</span><span class=o>=</span>live:CDLABEL<span class=o>=</span>Fedora-Xfce-Live-32-1-6<span class=w> </span>iso-scan/filename<span class=o>=</span>/grub/linux/Fedora-Xfce-Live.iso<span class=w>   </span>systemd.wants<span class=o>=</span>sshd.service<span class=w> </span>locale.LANG<span class=o>=</span>zh_CN.utf8<span class=w> </span>inst.lang<span class=o>=</span>zh_CN
<a id=__codelineno-16-135 name=__codelineno-16-135 href=#__codelineno-16-135></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/initrd.img
<a id=__codelineno-16-136 name=__codelineno-16-136 href=#__codelineno-16-136></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-137 name=__codelineno-16-137 href=#__codelineno-16-137></a><span class=k>fi</span>
<a id=__codelineno-16-138 name=__codelineno-16-138 href=#__codelineno-16-138></a>
<a id=__codelineno-16-139 name=__codelineno-16-139 href=#__codelineno-16-139></a><span class=c1>#https://anaconda-installer.readthedocs.io/en/latest/boot-options.html</span>
<a id=__codelineno-16-140 name=__codelineno-16-140 href=#__codelineno-16-140></a><span class=c1>#硬盘安装通用于所有包含&quot;Packages&quot;或&quot;BaseOS&quot;目录的 CentOS/Fedora ISO映像(Minimal,DVD,Everything)</span>
<a id=__codelineno-16-141 name=__codelineno-16-141 href=#__codelineno-16-141></a><span class=c1>#https://mirrors.zju.edu.cn/centos/8/isos/x86_64/</span>
<a id=__codelineno-16-142 name=__codelineno-16-142 href=#__codelineno-16-142></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-dvd1.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-143 name=__codelineno-16-143 href=#__codelineno-16-143></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;硬盘安装 CentOS&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-144 name=__codelineno-16-144 href=#__codelineno-16-144></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-dvd1.iso
<a id=__codelineno-16-145 name=__codelineno-16-145 href=#__codelineno-16-145></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/vmlinuz<span class=w> </span>inst.repo<span class=o>=</span>hd:LABEL<span class=o>=</span><span class=nv>$label</span>:/grub/linux/CentOS-dvd1.iso<span class=w>   </span>inst.lang<span class=o>=</span>zh_CN
<a id=__codelineno-16-146 name=__codelineno-16-146 href=#__codelineno-16-146></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/isolinux/initrd.img
<a id=__codelineno-16-147 name=__codelineno-16-147 href=#__codelineno-16-147></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-148 name=__codelineno-16-148 href=#__codelineno-16-148></a><span class=k>fi</span>
<a id=__codelineno-16-149 name=__codelineno-16-149 href=#__codelineno-16-149></a>
<a id=__codelineno-16-150 name=__codelineno-16-150 href=#__codelineno-16-150></a><span class=c1>#网络安装通用于所有包含&quot;images&quot;目录的 CentOS/Fedora ISO映像(Minimal,DVD,Everything,NetInstall,boot)</span>
<a id=__codelineno-16-151 name=__codelineno-16-151 href=#__codelineno-16-151></a><span class=c1>#https://mirrors.cqu.edu.cn/CentOS/8/isos/x86_64/</span>
<a id=__codelineno-16-152 name=__codelineno-16-152 href=#__codelineno-16-152></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-boot.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-153 name=__codelineno-16-153 href=#__codelineno-16-153></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;网络安装 CentOS [支持WiFi]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-154 name=__codelineno-16-154 href=#__codelineno-16-154></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/CentOS-boot.iso
<a id=__codelineno-16-155 name=__codelineno-16-155 href=#__codelineno-16-155></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/images/pxeboot/vmlinuz<span class=w> </span>inst.stage2<span class=o>=</span>hd:LABEL<span class=o>=</span><span class=nv>$label</span>:/grub/linux/CentOS-boot.iso<span class=w>   </span>inst.repo<span class=o>=</span>https://mirrors.aliyun.com/centos/8/BaseOS/x86_64/os/<span class=w> </span>inst.lang<span class=o>=</span>zh_CN<span class=w> </span><span class=nv>ip</span><span class=o>=</span>dhcp<span class=w> </span><span class=nv>nameserver</span><span class=o>=</span><span class=m>223</span>.6.6.6
<a id=__codelineno-16-156 name=__codelineno-16-156 href=#__codelineno-16-156></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/images/pxeboot/initrd.img
<a id=__codelineno-16-157 name=__codelineno-16-157 href=#__codelineno-16-157></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-158 name=__codelineno-16-158 href=#__codelineno-16-158></a><span class=k>fi</span>
<a id=__codelineno-16-159 name=__codelineno-16-159 href=#__codelineno-16-159></a>
<a id=__codelineno-16-160 name=__codelineno-16-160 href=#__codelineno-16-160></a><span class=c1>#https://mirrors.ustc.edu.cn/debian-cd/current-live/amd64/iso-hybrid/</span>
<a id=__codelineno-16-161 name=__codelineno-16-161 href=#__codelineno-16-161></a><span class=c1>#也适用于&#39;Kali LiveCD [root/toor]&#39;( username=root hostname=kali ) https://cdimage.kali.org/current/</span>
<a id=__codelineno-16-162 name=__codelineno-16-162 href=#__codelineno-16-162></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/debian-live-gnome.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-163 name=__codelineno-16-163 href=#__codelineno-16-163></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Debian 10.5 GNOME LiveCD (NO SSH)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-164 name=__codelineno-16-164 href=#__codelineno-16-164></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/debian-live-gnome.iso
<a id=__codelineno-16-165 name=__codelineno-16-165 href=#__codelineno-16-165></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/live/vmlinuz-4.19.0-10-amd64<span class=w> </span><span class=nv>boot</span><span class=o>=</span>live<span class=w> </span><span class=nv>findiso</span><span class=o>=</span>/grub/linux/debian-live-gnome.iso<span class=w>   </span>components<span class=w> </span><span class=nv>locales</span><span class=o>=</span>zh_CN.UTF-8
<a id=__codelineno-16-166 name=__codelineno-16-166 href=#__codelineno-16-166></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/live/initrd.img-4.19.0-10-amd64
<a id=__codelineno-16-167 name=__codelineno-16-167 href=#__codelineno-16-167></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-168 name=__codelineno-16-168 href=#__codelineno-16-168></a><span class=k>fi</span>
<a id=__codelineno-16-169 name=__codelineno-16-169 href=#__codelineno-16-169></a>
<a id=__codelineno-16-170 name=__codelineno-16-170 href=#__codelineno-16-170></a><span class=c1>#https://mirrors.cloud.tencent.com/ubuntu-cdimage/lubuntu/releases/</span>
<a id=__codelineno-16-171 name=__codelineno-16-171 href=#__codelineno-16-171></a><span class=c1>#也适用于 &#39;KDE neon LiveCD&#39;(initrd.lz; apparmor=0) https://files.kde.org/neon/images/user/current/neon-user-current.iso</span>
<a id=__codelineno-16-172 name=__codelineno-16-172 href=#__codelineno-16-172></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/lubuntu.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-173 name=__codelineno-16-173 href=#__codelineno-16-173></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;Ubuntu LXQt LiveCD (NO SSH)&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-174 name=__codelineno-16-174 href=#__codelineno-16-174></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/lubuntu.iso
<a id=__codelineno-16-175 name=__codelineno-16-175 href=#__codelineno-16-175></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/casper/vmlinuz<span class=w> </span><span class=nv>boot</span><span class=o>=</span>casper<span class=w> </span>iso-scan/filename<span class=o>=</span>/grub/linux/lubuntu.iso<span class=w>   </span><span class=nv>username</span><span class=o>=</span>root<span class=w> </span><span class=nv>locale</span><span class=o>=</span>zh_CN<span class=w> </span>keyboard-configuration/layoutcode<span class=o>=</span>us
<a id=__codelineno-16-176 name=__codelineno-16-176 href=#__codelineno-16-176></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/casper/initrd
<a id=__codelineno-16-177 name=__codelineno-16-177 href=#__codelineno-16-177></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-178 name=__codelineno-16-178 href=#__codelineno-16-178></a><span class=k>fi</span>
<a id=__codelineno-16-179 name=__codelineno-16-179 href=#__codelineno-16-179></a>
<a id=__codelineno-16-180 name=__codelineno-16-180 href=#__codelineno-16-180></a><span class=c1>#https://www.debian.org/releases/stable/amd64/ch05s03.zh-cn.html</span>
<a id=__codelineno-16-181 name=__codelineno-16-181 href=#__codelineno-16-181></a><span class=c1>#https://www.debian.org/releases/stable/amd64/ch06s03.zh-cn.html</span>
<a id=__codelineno-16-182 name=__codelineno-16-182 href=#__codelineno-16-182></a><span class=c1>#最好将用于硬盘安装的ISO映像(例如 debian-10.4.0-amd64-xfce-CD-1.iso)放在文件系统的根目录或第一层子目录中(可简化ISO映像的搜索)</span>
<a id=__codelineno-16-183 name=__codelineno-16-183 href=#__codelineno-16-183></a><span class=c1>#http://mirrors.yun-idc.com/debian/dists/stable/main/installer-amd64/current/images/hd-media/</span>
<a id=__codelineno-16-184 name=__codelineno-16-184 href=#__codelineno-16-184></a><span class=c1>#[注意]此方法不适用于 Ubuntu</span>
<a id=__codelineno-16-185 name=__codelineno-16-185 href=#__codelineno-16-185></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/debian/vmlinuz<span class=w> </span>-a<span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/debian/initrd.gz<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-186 name=__codelineno-16-186 href=#__codelineno-16-186></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;硬盘安装 Debian [自动搜索ISO映像(最好放在根目录)]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-187 name=__codelineno-16-187 href=#__codelineno-16-187></a><span class=w>        </span>linux<span class=w>  </span><span class=nv>$prefix</span>/linux/debian/vmlinuz<span class=w>   </span><span class=nv>priority</span><span class=o>=</span>low<span class=w> </span><span class=nv>vga</span><span class=o>=</span><span class=m>791</span><span class=w> </span><span class=nv>locale</span><span class=o>=</span>zh_CN
<a id=__codelineno-16-188 name=__codelineno-16-188 href=#__codelineno-16-188></a><span class=w>        </span>initrd<span class=w> </span><span class=nv>$prefix</span>/linux/debian/initrd.gz
<a id=__codelineno-16-189 name=__codelineno-16-189 href=#__codelineno-16-189></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-190 name=__codelineno-16-190 href=#__codelineno-16-190></a><span class=k>fi</span>
<a id=__codelineno-16-191 name=__codelineno-16-191 href=#__codelineno-16-191></a>
<a id=__codelineno-16-192 name=__codelineno-16-192 href=#__codelineno-16-192></a><span class=c1>#https://mirrors.163.com/debian/dists/stable/main/installer-amd64/current/images/netboot/</span>
<a id=__codelineno-16-193 name=__codelineno-16-193 href=#__codelineno-16-193></a><span class=c1>#https://mirrors.163.com/ubuntu/dists/focal/main/installer-amd64/current/legacy-images/netboot/</span>
<a id=__codelineno-16-194 name=__codelineno-16-194 href=#__codelineno-16-194></a><span class=c1>#网络安装也适用于 Ubuntu 的 mini.iso 映像(支持WiFi)</span>
<a id=__codelineno-16-195 name=__codelineno-16-195 href=#__codelineno-16-195></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/debian/mini.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-196 name=__codelineno-16-196 href=#__codelineno-16-196></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;网络安装 Debian [不支持WiFi]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-197 name=__codelineno-16-197 href=#__codelineno-16-197></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/debian/mini.iso
<a id=__codelineno-16-198 name=__codelineno-16-198 href=#__codelineno-16-198></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/linux<span class=w>   </span><span class=nv>priority</span><span class=o>=</span>low<span class=w> </span><span class=nv>vga</span><span class=o>=</span><span class=m>791</span><span class=w> </span><span class=nv>locale</span><span class=o>=</span>zh_CN
<a id=__codelineno-16-199 name=__codelineno-16-199 href=#__codelineno-16-199></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/initrd.gz
<a id=__codelineno-16-200 name=__codelineno-16-200 href=#__codelineno-16-200></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-201 name=__codelineno-16-201 href=#__codelineno-16-201></a><span class=k>fi</span>
<a id=__codelineno-16-202 name=__codelineno-16-202 href=#__codelineno-16-202></a>
<a id=__codelineno-16-203 name=__codelineno-16-203 href=#__codelineno-16-203></a><span class=c1>#https://mirrors.aliyun.com/opensuse/distribution/openSUSE-stable/live/</span>
<a id=__codelineno-16-204 name=__codelineno-16-204 href=#__codelineno-16-204></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-KDE-Live.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-205 name=__codelineno-16-205 href=#__codelineno-16-205></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;openSUSE Leap 15.2 KDE LiveCD [root/空]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-206 name=__codelineno-16-206 href=#__codelineno-16-206></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-KDE-Live.iso
<a id=__codelineno-16-207 name=__codelineno-16-207 href=#__codelineno-16-207></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/linux<span class=w> </span><span class=nv>root</span><span class=o>=</span>live:CDLABEL<span class=o>=</span>openSUSE_Leap_15.2_KDE_Live<span class=w> </span>iso-scan/filename<span class=o>=</span>/grub/linux/openSUSE-Leap-KDE-Live.iso<span class=w>   </span>systemd.wants<span class=o>=</span>sshd.service<span class=w> </span><span class=nv>lang</span><span class=o>=</span>zh_CN
<a id=__codelineno-16-208 name=__codelineno-16-208 href=#__codelineno-16-208></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/initrd
<a id=__codelineno-16-209 name=__codelineno-16-209 href=#__codelineno-16-209></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-210 name=__codelineno-16-210 href=#__codelineno-16-210></a><span class=k>fi</span>
<a id=__codelineno-16-211 name=__codelineno-16-211 href=#__codelineno-16-211></a>
<a id=__codelineno-16-212 name=__codelineno-16-212 href=#__codelineno-16-212></a><span class=c1>#https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/cha-boot-parameters.html</span>
<a id=__codelineno-16-213 name=__codelineno-16-213 href=#__codelineno-16-213></a><span class=c1>#https://ftp.sjtu.edu.cn/opensuse/distribution/openSUSE-stable/iso/</span>
<a id=__codelineno-16-214 name=__codelineno-16-214 href=#__codelineno-16-214></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-DVD.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-215 name=__codelineno-16-215 href=#__codelineno-16-215></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;硬盘安装 openSUSE Leap&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-216 name=__codelineno-16-216 href=#__codelineno-16-216></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-DVD.iso
<a id=__codelineno-16-217 name=__codelineno-16-217 href=#__codelineno-16-217></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/linux<span class=w> </span><span class=nv>install</span><span class=o>=</span>hd:/grub/linux/openSUSE-Leap-DVD.iso<span class=w>   </span><span class=nv>lang</span><span class=o>=</span>zh_CN
<a id=__codelineno-16-218 name=__codelineno-16-218 href=#__codelineno-16-218></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/initrd
<a id=__codelineno-16-219 name=__codelineno-16-219 href=#__codelineno-16-219></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-220 name=__codelineno-16-220 href=#__codelineno-16-220></a><span class=k>fi</span>
<a id=__codelineno-16-221 name=__codelineno-16-221 href=#__codelineno-16-221></a>s
<a id=__codelineno-16-222 name=__codelineno-16-222 href=#__codelineno-16-222></a><span class=c1>#https://mirrors.nju.edu.cn/opensuse/distribution/openSUSE-stable/iso/</span>
<a id=__codelineno-16-223 name=__codelineno-16-223 href=#__codelineno-16-223></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-f<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-NET.iso<span class=w> </span><span class=o>]</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>then</span>
<a id=__codelineno-16-224 name=__codelineno-16-224 href=#__codelineno-16-224></a><span class=w>    </span>menuentry<span class=w> </span><span class=s1>&#39;网络安装 openSUSE Leap [支持WiFi]&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span>
<a id=__codelineno-16-225 name=__codelineno-16-225 href=#__codelineno-16-225></a><span class=w>        </span>loopback<span class=w> </span>loop0<span class=w> </span><span class=nv>$prefix</span>/linux/openSUSE-Leap-NET.iso
<a id=__codelineno-16-226 name=__codelineno-16-226 href=#__codelineno-16-226></a><span class=w>        </span>linux<span class=w>  </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/linux<span class=w> </span><span class=nv>install</span><span class=o>=</span>https://ftp.sjtu.edu.cn/opensuse/distribution/openSUSE-stable/repo/oss/<span class=w>   </span><span class=nv>lang</span><span class=o>=</span>zh_CN<span class=w> </span><span class=nv>netsetup</span><span class=o>=</span>dhcp<span class=w> </span><span class=nv>nameserver</span><span class=o>=</span><span class=m>223</span>.6.6.6
<a id=__codelineno-16-227 name=__codelineno-16-227 href=#__codelineno-16-227></a><span class=w>        </span>initrd<span class=w> </span><span class=o>(</span>loop0<span class=o>)</span>/boot/x86_64/loader/initrd
<a id=__codelineno-16-228 name=__codelineno-16-228 href=#__codelineno-16-228></a><span class=w>    </span><span class=o>}</span>
<a id=__codelineno-16-229 name=__codelineno-16-229 href=#__codelineno-16-229></a><span class=k>fi</span>
<a id=__codelineno-16-230 name=__codelineno-16-230 href=#__codelineno-16-230></a>
<a id=__codelineno-16-231 name=__codelineno-16-231 href=#__codelineno-16-231></a>menuentry<span class=w> </span><span class=s1>&#39;关机&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span><span class=w> </span>halt<span class=w> </span><span class=p>;</span><span class=w> </span><span class=o>}</span>
<a id=__codelineno-16-232 name=__codelineno-16-232 href=#__codelineno-16-232></a>menuentry<span class=w> </span><span class=s1>&#39;重新启动&#39;</span><span class=w> </span>--unrestricted<span class=w> </span><span class=o>{</span><span class=w> </span>reboot<span class=w> </span><span class=p>;</span><span class=w> </span><span class=o>}</span>
</code></pre></div> <h2 id=_1>参考链接<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ul> <li><a href=https://www.gnu.org/software/grub/manual/grub/html_node/Changes-from-GRUB-Legacy.html#Changes-from-GRUB-Legacy>官方文档</a></li> <li><a href=http://www.jinbuguo.com/linux/grub.cfg.html>http://www.jinbuguo.com/linux/grub.cfg.html</a></li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/redhatxl/redhatxl.github.io/issues/new/?title=[Feedback]+Linux%20grub/grub2%E8%AF%A6%E8%A7%A3+-+/linux/system/Linux%20grub%3Agrub2%E8%AF%A6%E8%A7%A3/" target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2016 - 2024 kaliarch </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/redhatxl target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com/blog_img/20220125122524.png target=_blank rel=noopener title=kaliarch-bucket-1251990360.cos.ap-beijing.myqcloud.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154zm-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4zm-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2zM563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4zm-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6zm107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">同意</button> <label class=md-button for=__settings>管理设定</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../../assets/javascripts/bundle.bd41221c.min.js></script> </body> </html>